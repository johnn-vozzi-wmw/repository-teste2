/*
EXECUTAR SCRIPTS VERSÃO 4.XXX
VERSÃO APP DE 4.465 ATÉ 4.483
*/

/*-------------------------------------------------------------------------
Data: 07/04/2017
Autor: Tiago
Descrição: Exclusão da tabela cargaProgramada
------------------------------------------------------------------------*/

DROP TABLE TBLVPCARGAPROGRAMADA;
GO

DROP TABLE TBLVPLOGCOMANDOPDA;
GO


--VERSÃO 5.003

ALTER TABLE TBLVPTIPOPAGAMENTO ADD CDBANCO VARCHAR(20) NULL;
GO

ALTER TABLE TBLVPBANCO ADD CDBENEFICIARIO VARCHAR(20) NULL;
GO

ALTER TABLE TBLVPTIPOPAGAMENTO ADD FLBOLETO CHAR(1) NULL;
GO

ALTER TABLE TBLVPBANCO ADD NUAGENCIACODIGOCEDENTE VARCHAR(20) NULL;
GO

ALTER TABLE TBLVPBANCO ADD CDIDENTIFICACAOBANCO VARCHAR(20) NULL;
GO

ALTER TABLE TBLVPBANCO ADD NUCARTEIRA VARCHAR(20) NULL;
GO

ALTER TABLE TBLVPPEDIDO ADD FLBOLETOCONTIMPRESSO CHAR(1) NULL;
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLBOLETOCONTIMPRESSO CHAR(1) NULL;
GO

ALTER TABLE TBLVPTIPOPEDIDO ADD FLCONSIGNAPEDIDO CHAR(1);
GO

ALTER TABLE TBLVPCLIENTE ADD FLCONSIGNAPEDIDO CHAR(1);
GO

ALTER TABLE TBLVPCLIENTE ADD VLLIMITECREDITOCONSIG DECIMAL(16,7);
GO

ALTER TABLE TBLVPCLIENTE ADD VLPCTDEVOLUCAOCONSIG DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDO ADD DTCONSIGNACAO DATETIME;
GO

ALTER TABLE TBLVPPEDIDO ADD VLPEDIDOORIGINAL DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDO ADD VLTOTALDEVOLUCOES DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDOERP ADD DTCONSIGNACAO DATETIME;
GO

ALTER TABLE TBLVPPEDIDOERP ADD VLPEDIDOORIGINAL DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDOERP ADD VLTOTALDEVOLUCOES DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDO ADD FLCONSIGNACAOIMPRESSA CHAR(1);
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLCONSIGNACAOIMPRESSA CHAR(1);
GO

ALTER TABLE TBLVPPEDIDO ADD FLNFECONTIMPRESSA CHAR(1) NULL;
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLNFECONTIMPRESSA CHAR(1) NULL;
GO

ALTER TABLE TBLVPPRODUTO ADD DSREFERENCIAPRODUTO VARCHAR(100) NULL;
GO

ALTER TABLE TBLVPREPRESENTANTE ADD NUNOTAGERAL VARCHAR(20);
GO

CREATE TABLE TBLVPPEDIDOCONSIGNACAO (
   CDEMPRESA             VARCHAR(20)          NOT NULL,
   CDREPRESENTANTE       VARCHAR(20)          NOT NULL,
   FLORIGEMPEDIDO        CHAR(1)              NOT NULL,
   NUPEDIDO              VARCHAR(30)          NOT NULL,
   CDPRODUTO             VARCHAR(20)          NOT NULL,
   FLTIPOITEMPEDIDO      CHAR(1)              NOT NULL,
   NUSEQPRODUTO          DECIMAL(9,0)         NOT NULL,
   CDCLIENTE             VARCHAR(20)          NOT NULL,
   NUSEQCONSIGNACAO      VARCHAR(20)          NOT NULL,
   DTEMISSAO             DATETIME             NULL,
   HREMISSAO             CHAR(5)              NULL,
   NUSEQITEMPEDIDO       DECIMAL(9,0)         NULL,
   CDTABELAPRECO         VARCHAR(30)          NULL,
   CDCONDICAOPAGAMENTO   VARCHAR(40)          NULL,
   CDTIPOPEDIDO          VARCHAR(20)          NULL,
   CDTIPOPAGAMENTO       VARCHAR(20)          NULL,
   CDCONDICAOCOMERCIAL   VARCHAR(20)          NULL,
   CDUNIDADE             VARCHAR(20)          NULL,
   QTITEMFISICO          DECIMAL(16,7)        NULL,
   VLITEMPEDIDO          DECIMAL(16,7)        NULL,
   VLTOTALITEMPEDIDO     DECIMAL(16,7)        NULL,
   VLPCTDESCONTO         DECIMAL(16,7)        NULL,
   VLPCTACRESCIMO        DECIMAL(16,7)        NULL,
   FLTIPOREGISTRO        CHAR(1)              NULL,
   NUCARIMBO             DECIMAL(9,0)         NULL,
   FLTIPOALTERACAO       CHAR(1)              NULL,
   DTALTERACAO       DATETIME             NULL,
   HRALTERACAO       VARCHAR(8)           NULL,
   CDUSUARIO             VARCHAR(8)           NOT NULL, 
   CONSTRAINT PK_TBLVPPEDIDOCONSIGNACAO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDCLIENTE, NUSEQCONSIGNACAO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPFAIXABOLETO (
	CDEMPRESA		VARCHAR(20)		NOT NULL,
	CDREPRESENTANTE VARCHAR(20)		NOT NULL,
	CDFAIXABOLETO   VARCHAR(20)     NOT NULL,
	CDBANCO			VARCHAR(20)			NULL,
	NUBOLETOINICIO	DECIMAL(13,0)			NULL,
	NUBOLETOFIM		DECIMAL(13,0)			NULL,
	NUULTIMOBOLETO	DECIMAL(13,0)			NULL,
	FLTIPOALTERACAO	CHAR(1)				NULL,
	NUCARIMBO		DECIMAL(9,0)		NULL,
    DTALTERACAO       DATETIME             NULL,
    HRALTERACAO       VARCHAR(8)           NULL,
	CDUSUARIO		VARCHAR(8)		NOT NULL,
CONSTRAINT PK_TBLVPFAIXABOLETO PRIMARY KEY(CDEMPRESA,CDREPRESENTANTE,CDFAIXABOLETO,CDUSUARIO)
)
go

CREATE TABLE TBLVPPEDIDOBOLETOCONT (
   CDEMPRESA               VARCHAR(20)          NOT NULL,
   CDREPRESENTANTE         VARCHAR(20)          NOT NULL,
   NUPEDIDO                VARCHAR(30)          NOT NULL,
   FLORIGEMPEDIDO          CHAR(1)              NOT NULL,
   NUSEQUENCIABOLETOPEDIDO DECIMAL(9,0)         NOT NULL,
   CDPAGAMENTOPEDIDO	   VARCHAR(20)			NOT NULL,
   CDBANCO                 VARCHAR(20)          NULL,
   CDBARRAS                VARCHAR(200)         NULL,
   DSLINHASDIGITAVEL       VARCHAR(100)         NULL,
   DTVENCIMENTO            DATETIME             NULL,
   DTDOCUMENTO             DATETIME             NULL,
   NUDOCUMENTO             DECIMAL(9,0)         NULL,
   VLBOLETO                DECIMAL(16,7)        NULL,
   NUNOSSONUMERO           DECIMAL(18,0)         NULL,
   DSOBSCEDENTE            VARCHAR(4000)        NULL,
   CDBENEFICIARIO 		   VARCHAR(20) 			NULL,
   FLTIPOALTERACAO         CHAR(1)              NULL,
   NUCARIMBO			   DECIMAL(9,0)			NULL,
   DTALTERACAO       DATETIME             NULL,
   HRALTERACAO       VARCHAR(8)           NULL,
   CDUSUARIO			   VARCHAR(8)			NOT NULL,
   CONSTRAINT PK_TBLVPPEDIDOBOLETOCONT PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, NUSEQUENCIABOLETOPEDIDO, CDPAGAMENTOPEDIDO, CDUSUARIO)
)
GO

--VERSÃO 5.005

/*-------------------------------------------------------------------------
Data: 23/06/2017
Autor: Fernando
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPTIPOPAGAMENTO ADD FLPERMITEMULTIPLOSPAGAMENTOS CHAR(1);
GO

/*-------------------------------------------------------------------------
Data: 26/06/2017
Autor: Eduardo
Descrição: Nova coluna tabela pedido
------------------------------------------------------------------------*/ 
ALTER TABLE TBLVPPEDIDO ADD CDPEDIDOSAGRUPADOS VARCHAR(1000) NULL;
GO

ALTER TABLE TBLVPPEDIDOERP ADD CDPEDIDOSAGRUPADOS VARCHAR(1000) NULL;
GO

--VERSÃO 5.007

/*-------------------------------------------------------------------------
Autor: Renan	
Data: 09/01/2017
Descrição: Nova tabela
------------------------------------------------------------------------*/
CREATE TABLE TBLVPACESSOCONTATO (
   CDACESSOCONTATO      VARCHAR(20)          NOT NULL,
   CDUSUARIO            VARCHAR(8)           NOT NULL,
   DSNOME               VARCHAR(50)          NOT NULL,
   DSEMAIL              VARCHAR(50)          NOT NULL,
   DSEMPRESA            VARCHAR(50)          NULL,
   NUFUNCIONARIOS       VARCHAR(20)          NULL,
   DTCADASTRO           DATETIME             NULL,
   HRCADASTRO           VARCHAR(8)           NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   NUCARIMBO            DECIMAL(9,0)         NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   DTALTERACAO          DATETIME             NULL,
   CONSTRAINT PK_TBLVPACESSOCONTATO PRIMARY KEY (CDACESSOCONTATO)
)
GO

--VERSÃO 5.028

/*-------------------------------------------------------------------------
Data: 06/07/2017
Autor: Tiago
Descrição: Nova tabela
------------------------------------------------------------------------*/
CREATE TABLE TBLVPLOGSYNCBACKGROUND (
   CDLOG                VARCHAR(20)          NOT NULL,
   CDUSUARIO            VARCHAR(20)          NOT NULL,
   CDNIVEL              VARCHAR(5)           NULL,
   DSLOG                VARCHAR(4000)        NULL,
   DTLOG                DATETIME             NULL,
   HRLOG                VARCHAR(8)           NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   NUCARIMBO            DECIMAL(9,0)         NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL
)
GO

ALTER TABLE TBLVPLOGSYNCBACKGROUND
   ADD CONSTRAINT PK_TBLVPLOGSYNCBACKGROUND PRIMARY KEY (CDLOG, CDUSUARIO)
GO


--VERSÃO 5.041

/*-------------------------------------------------------------------------
Autor: Tiago	
Data: 17/08/2017
Descrição: Nova tabela
------------------------------------------------------------------------*/

CREATE TABLE TBLVPATUALIZACAOBD (
	CDSCRIPT			DECIMAL(9,0)	NOT NULL,
	NUSEQEXEC			DECIMAL(9,0)	NOT NULL,
	DSSCRIPT			TEXT		NULL,
	FLEXECUTADO			CHAR(1)			NULL,
	FLTIPOALTERACAO		CHAR(1)			NULL,
	NUCARIMBO			DECIMAL(9,0)	NULL,
	DTALTERACAO			DATETIME		NULL,
	HRALTERACAO			VARCHAR(8)		NULL,	
CONSTRAINT PK_TBLVPATUALIZACAOBD PRIMARY KEY(CDSCRIPT, NUSEQEXEC)
)
GO

/*-------------------------------------------------------------------------
Data: 25/08/2017
Autor: Fernando
Descrição: Nova tabela
------------------------------------------------------------------------*/
CREATE TABLE TBLVPPRODUTOCREDITODESC (
   CDEMPRESA            	VARCHAR(20)          NOT NULL,
   CDPRODUTO            	VARCHAR(20)          NOT NULL,
   CDPRODUTOCREDITODESC		VARCHAR(20)			 NOT NULL,
   DTVIGENCIAINICIAL    	DATETIME             NULL,
   DTVIGENCIAFINAL			DATETIME			 NULL,
   QTITEM               	DECIMAL(16,7)        NULL,
   VLUNITARIO           	DECIMAL(16,7)        NULL,
   FLTIPOCADASTROPRODUTO	CHAR(1)           	 NULL,
   FLINATIVACAOAUTO     	CHAR(1)				 NULL,
   DTCRIACAO				DATETIME 			 NULL,
   HRCRIACAO				VARCHAR(8)			 NULL,
   CDUSUARIO				VARCHAR(8)			 NOT NULL,
   FLTIPOALTERACAO      	CHAR(1)              NULL,
   NUCARIMBO            	DECIMAL(9,0)         NULL,
   DTALTERACAO          	DATETIME             NULL,
   HRALTERACAO          	VARCHAR(8)           NULL,
   CONSTRAINT PK_TBLVPPRODUTOCREDITODESC PRIMARY KEY (CDEMPRESA, CDPRODUTO, CDPRODUTOCREDITODESC, CDUSUARIO)
)
GO

/*-------------------------------------------------------------------------
Data: 30/08/2017
Autor: Fernando
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPITEMPEDIDO ADD QTDCREDITODESC DECIMAL(9,0);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD FLTIPOCADASTROITEM CHAR(1);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD QTDCREDITODESC DECIMAL(9,0);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD FLTIPOCADASTROITEM CHAR(1);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD DTVIGENCIAFINALCREDITO DATETIME;
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD DTVIGENCIAFINALCREDITO DATETIME;
GO

--VERSÃO 5.050

/*-------------------------------------------------------------------------
Data: 13/09/2017
Autor: Renan
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPRODUTO ADD FLLOTEPRODUTOCRITICO CHAR(1);
GO

--VERSÃO 5.051

/*-------------------------------------------------------------------------
Data: 18/09/2017
Autor: Eduardo
Descrição: Alteração colunas
------------------------------------------------------------------------*/

ALTER TABLE TBLVPITEMPEDIDO DROP COLUMN DTVIGENCIAFINALCREDITO;
GO

ALTER TABLE TBLVPITEMPEDIDOERP DROP COLUMN DTVIGENCIAFINALCREDITO;
GO

ALTER TABLE TBLVPITEMPEDIDO ADD CDPRODUTOCREDITODESC VARCHAR (20) NULL;
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD CDPRODUTOCREDITODESC VARCHAR (20) NULL;
GO


--VERSÃO 5.052

CREATE TABLE TBLVPREGIAO (
   CDREGIAO             VARCHAR(20)          NOT NULL,
   NMREGIAO             VARCHAR(100)         NOT NULL,
   NUCARIMBO            DECIMAL(9,0)         NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   CONSTRAINT PK_TBLVPREGIAO PRIMARY KEY (CDREGIAO)
)
GO

ALTER TABLE TBLVPPEDIDO ADD CDREGIAO VARCHAR(20);
GO

ALTER TABLE TBLVPPEDIDOERP ADD CDREGIAO VARCHAR(20);
GO

ALTER TABLE TBLVPTRANSPORTADORAREG ADD VLMAXPEDIDO DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPITEMPEDIDO ADD QTITEMDESEJADO DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD QTITEMDESEJADO DECIMAL(16,7);
GO


--VERSÃO 5.053

CREATE TABLE TBLVPTABPRECOGRUPOPROD (
	CDEMPRESA VARCHAR(20) NOT NULL,
	CDREPRESENTANTE VARCHAR(20) NOT NULL,
	CDTABELAPRECO VARCHAR(30) NOT NULL,
	CDGRUPOPRODUTO1 VARCHAR(20) NOT NULL,
	QTMINPRODUTO DECIMAL(16,7) NULL,
	QTMINPEDIDO DECIMAL(16,7) NULL,
	QTMINGRADE1 DECIMAL(16,7) NULL,
	QTMINGRADE2 DECIMAL(16,7) NULL,
	NUCARIMBO DECIMAL(9),
	FLTIPOALTERACAO CHAR(1) NULL,
	CDUSUARIO VARCHAR(20) NOT NULL,
	DTALTERACAO DATETIME NULL,
	HRALTERACAO VARCHAR(8) NULL,
	CONSTRAINT PK_TBLVPTABELAPRECOGRUPOPROD PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDTABELAPRECO, CDGRUPOPRODUTO1, CDUSUARIO)
)
GO

CREATE TABLE TBLVPENTREGA (
   CDEMPRESA		VARCHAR(20)	  NOT NULL,
   CDREPRESENTANTE	VARCHAR(20)	  NOT NULL,
   CDENTREGA		VARCHAR(20)   NOT NULL,
   DSENTREGA		VARCHAR(100)	  NULL,
   CDTABELAPRECO	VARCHAR(20)		  NULL,
   VLMINPEDIDO		DECIMAL(16,7)	  NULL,
   QTMINPRODUTO		DECIMAL(9,0)	  NULL,
   DTVIGENCIAINICIAL DATETIME		  NULL,
   DTVIGENCIAFINAL  DATETIME		  NULL,
   FLTIPOALTERACAO  CHAR(1)			  NULL,
   CDUSUARIO		VARCHAR(8)	  NOT NULL,
   NUCARIMBO		DECIMAL(9,0)	  NULL,
   DTALTERACAO		DATETIME		  NULL,
   HRALTERACAO		VARCHAR(8)		  NULL,
   CONSTRAINT PK_TBLVPENTREGA PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDENTREGA, CDUSUARIO)
)
GO

ALTER TABLE TBLVPTABELAPRECO ADD QTMINPRODUTO DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPTABELAPRECO ADD QTMINPEDIDO DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPTABELAPRECO ADD QTMINGRADE1 DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPTABELAPRECO ADD QTMINGRADE2 DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPDESCPROMOCIONAL ADD QTMINVENDA DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPDESCPROMOCIONAL ADD QTMINGRADE1 DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPDESCPROMOCIONAL ADD QTMINGRADE2 DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPPEDIDO ADD CDENTREGA VARCHAR(20);
GO

ALTER TABLE TBLVPPEDIDOERP ADD CDENTREGA VARCHAR(20);
GO


--VERSÃO 5.056

ALTER TABLE TBLVPITEMPEDIDO ADD VLINDICEGRUPOPROD DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLINDICEGRUPOPROD DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPPEDIDO ADD CDTRANSPORTADORAAUX VARCHAR(20) NULL;
GO

ALTER TABLE TBLVPPEDIDOERP ADD CDTRANSPORTADORAAUX VARCHAR(20) NULL;
GO

ALTER TABLE TBLVPCLIENTE ADD VLVENDAMENSAL DECIMAL(16,7) NULL;
GO

CREATE TABLE TBLVPINDICEGRUPOPROD (
	CDEMPRESA			VARCHAR(20)		NOT NULL,
	CDREPRESENTANTE		VARCHAR(20)		NOT NULL,
	CDGRUPOPRODUTO1		VARCHAR(20)		NOT NULL,
	CDTABELAPRECO		VARCHAR(30)		NOT NULL,
	CDCONDICAOPAGAMENTO VARCHAR(20)		NOT NULL,
	VLINDICEFINANCEIRO	DECIMAL(16,7)	NULL,
	FLTIPOALTERACAO		CHAR(1)			NULL,
	NUCARIMBO			DECIMAL(9,0)	NULL,
	CDUSUARIO			VARCHAR(20)		NOT NULL,
	DTALTERACAO			DATETIME		NULL,
	HRALTERACAO			VARCHAR(8)		NULL,
	CONSTRAINT PK_TBLVWINDICEGRUPOPROD PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDGRUPOPRODUTO1, CDTABELAPRECO, CDCONDICAOPAGAMENTO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPDESCONTOVENDA (
	CDEMPRESA			VARCHAR(20)		NOT NULL,
	VLVENDA             DECIMAL(16,7)	NOT NULL,
	VLPCTDESCONTO       DECIMAL(16,7)	NULL,
	FLTIPOALTERACAO		CHAR(1)			NULL,
	NUCARIMBO			DECIMAL(9,0)	NULL,
	CDUSUARIO			VARCHAR(20)		NOT NULL,
	DTALTERACAO			DATETIME		NULL,
	HRALTERACAO			VARCHAR(8)		NULL,
	CONSTRAINT PK_TBLVPDESCONTOVENDA PRIMARY KEY (CDEMPRESA, VLVENDA, CDUSUARIO)
)
GO


--VERSÃO 5.056

/*------------------------------------------------------------------------
Data: 29/09/2017
Autor: Leonardo Machado Fernandes
Descrição: Descrição: Ajuste chave primária
------------------------------------------------------------------------*/
DROP TABLE TBLVPTRANSPORTADORAREG;
GO

CREATE TABLE TBLVPTRANSPORTADORAREG (
  CDEMPRESA			VARCHAR(20)	 NOT NULL,
  CDREPRESENTANTE	VARCHAR(20)	 NOT NULL,
  CDTRANSPORTADORA	VARCHAR(20)  NOT NULL,
  CDREGIAO			VARCHAR(20)	 NOT NULL,
  CDTIPOFRETE		VARCHAR(20)	 NOT NULL,
  VLMINPEDIDO		DECIMAL(16,7)	 NOT NULL,
  FLPOSSUICONTRATO	CHAR(1)			 NULL,
  VLPCTFRETE		DECIMAL(16,7)	 NULL,
  VLMINFRETE		DECIMAL(16,7)	 NULL,
  CDUSUARIO			VARCHAR(8)	 NOT NULL,
  FLTIPOALTERACAO	CHAR(1)			 NULL,
  NUCARIMBO			DECIMAL(9,0)	 NULL,
  DTALTERACAO		DATETIME		 NULL,
  HRALTERACAO		VARCHAR(8)		 NULL,
  CONSTRAINT	PK_TBLVPTRANSPORTADORAREG	PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDTRANSPORTADORA, CDREGIAO, CDTIPOFRETE, VLMINPEDIDO, CDUSUARIO)
)
GO


--VERSÃO 5.059

CREATE TABLE TBLVPDESCPROMOCIONALGRADE (
	CDEMPRESA			VARCHAR(20)			NOT NULL,
	CDREPRESENTANTE		VARCHAR(20)			NOT NULL,
	CDCLIENTE			VARCHAR(20)			NOT NULL,
	CDPRODUTO   		VARCHAR(20)			NOT NULL,
	CDGRUPODESCCLI		VARCHAR(20)			NOT NULL,
	CDGRUPODESCPROD		VARCHAR(20)			NOT NULL,
	QTITEM 				DECIMAL(9,0)  		NOT NULL,
	CDTABELAPRECO		VARCHAR(30)			NOT NULL,
	CDCONDICAOCOMERCIAL	VARCHAR(20)			NOT NULL,
	CDITEMGRADE2		VARCHAR(20)			NOT NULL,
	NUMULTIPLOESPECIAL	DECIMAL(9,0) 		NULL,
	NUCARIMBO 			DECIMAL(9,0)		NULL,
	FLTIPOALTERACAO		CHAR(1)				NULL,
	CDUSUARIO			VARCHAR(20)			NOT NULL,
	DTALTERACAO			DATETIME			NULL,
	HRALTERACAO			VARCHAR(8)			NULL,
	CONSTRAINT	PK_TBLVPDESCPROMOCIONALGRADE PRIMARY KEY (CDEMPRESA,CDREPRESENTANTE, CDCLIENTE, CDPRODUTO, CDGRUPODESCCLI, CDGRUPODESCPROD, QTITEM, CDTABELAPRECO, CDCONDICAOCOMERCIAL, CDITEMGRADE2, CDUSUARIO)
)
GO

ALTER TABLE TBLVPITEMGRADE ADD NUSEQUENCIA DECIMAL(9,0) NULL;
GO

--VERSÃO 5.060	

/*-------------------------------------------------------------------------
Data: 12/10/2015
Autor: Leonardo Machado Fernandes
Descrição: Alteração do tamanho da coluna 
------------------------------------------------------------------------*/ 
ALTER TABLE TBLVPENTREGA ALTER COLUMN CDTABELAPRECO VARCHAR(30);
GO


--VERSÃO 5.061	

/*------------------------------------------------------------------------
Data: 10/10/2017
Autor: Renan
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPCONDICAOPAGAMENTO ADD QTMINPRODUTO DECIMAL(9,0) NULL;
GO


--VERSÃO 5.064

/*-------------------------------------------------------------------------
Data: 22/09/2017
Autor: Tiago
Descrição: Novas colunas
------------------------------------------------------------------------*/

--SQLSERVER

IF NOT EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBLVPNOVOCLIENTE' AND COLUMN_NAME = 'HRCADASTRO')
BEGIN
	ALTER TABLE TBLVPNOVOCLIENTE ADD HRCADASTRO VARCHAR(8);
END;
GO

IF NOT EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'TBLVPNOVOCLIENTE' AND COLUMN_NAME = 'NMFANTASIA')
BEGIN
	ALTER TABLE TBLVPNOVOCLIENTE ADD NMFANTASIA VARCHAR(100);
END;
GO

--/SQLSERVER


--ORACLE

DECLARE 
  V_COLUMN_EXISTS NUMBER := 0;   
BEGIN 
  SELECT COUNT(*) INTO V_COLUMN_EXISTS 
    FROM USER_TAB_COLS 
    WHERE COLUMN_NAME = 'HRCADASTRO' 
      AND TABLE_NAME = 'TBLVPNOVOCLIENTE'; 
 
  IF (V_COLUMN_EXISTS = 0) THEN 
      EXECUTE IMMEDIATE 'alter table TBLVPNOVOCLIENTE ADD (HRCADASTRO VARCHAR(8))'; 
  END IF; 
END; 
/

DECLARE 
  V_COLUMN_EXISTS NUMBER := 0;   
BEGIN 
  SELECT COUNT(*) INTO V_COLUMN_EXISTS 
    FROM USER_TAB_COLS 
    WHERE COLUMN_NAME = 'NMFANTASIA' 
      AND TABLE_NAME = 'TBLVPNOVOCLIENTE'; 
 
  IF (V_COLUMN_EXISTS = 0) THEN 
      EXECUTE IMMEDIATE 'alter table TBLVPNOVOCLIENTE ADD (NMFANTASIA VARCHAR(100))'; 
  END IF; 
END; 
/

--/ORACLE

--POSTGRES

ALTER TABLE TBLVPNOVOCLIENTE ADD COLUMN IF NOT EXISTS HRCADASTRO VARCHAR(8);

ALTER TABLE TBLVPNOVOCLIENTE ADD COLUMN IF NOT EXISTS NMFANTASIA VARCHAR(100);

--/POSTGRES

CREATE TABLE TBLVPTIPOANALISECLIENTE (
	CDTIPOANALISE	VARCHAR(20)		NOT NULL,
	DSTIPOANALISE	VARCHAR(100)	NULL,
	NUCARIMBO		DECIMAL(9,0)	NULL,
	FLTIPOALTERACAO	CHAR(1)			NULL,
	DTALTERACAO		DATETIME		NULL,
	HRALTERACAO		VARCHAR(8)		NULL,
	CDUSUARIO		VARCHAR(8)		NOT NULL,
CONSTRAINT PK_TBLVPTIPOANALISECLIENTE PRIMARY KEY(CDTIPOANALISE, CDUSUARIO)
)
GO

CREATE TABLE TBLVPSTATUSANALISECLIENTE (
	CDSTATUSANALISE	VARCHAR(20)		NOT NULL,
	DSSTATUSANALISE	VARCHAR(100)	NULL,
	FLREPROVACAO	CHAR(1)			NULL,
	FLCONCLUSAO		CHAR(1)			NULL,
	NUCARIMBO		DECIMAL(9,0)	NULL,
	FLTIPOALTERACAO	CHAR(1)			NULL,
	DTALTERACAO		DATETIME		NULL,
	HRALTERACAO		VARCHAR(8)		NULL,
	CDUSUARIO		VARCHAR(8)		NOT NULL,
CONSTRAINT PK_TBLVPSTATUSANALISECLIENTE PRIMARY KEY(CDSTATUSANALISE, CDUSUARIO)
)
GO

CREATE TABLE TBLVPMOTIVOREPROCLIENTE (
	CDMOTIVOREPROVACAO	VARCHAR(20)		NOT NULL,
	DSMOTIVOREPROVACAO	VARCHAR(100)	NULL,
	NUCARIMBO			DECIMAL(9,0)	NULL,
	FLTIPOALTERACAO		CHAR(1)			NULL,
	DTALTERACAO			DATETIME		NULL,
	HRALTERACAO			VARCHAR(8)		NULL,
	CDUSUARIO			VARCHAR(8)		NOT NULL,
CONSTRAINT PK_TBLVPMOTIVOREPROCLIENTE PRIMARY KEY(CDMOTIVOREPROVACAO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPNOVOCLIENTEANA (
	CDEMPRESA           VARCHAR(20)     NOT NULL,
	CDREPRESENTANTE     VARCHAR(20)     NOT NULL,
	FLORIGEMNOVOCLIENTE CHAR(1)         NOT NULL,
	CDNOVOCLIENTE       VARCHAR(20)     NOT NULL,
	CDTIPOANALISE		VARCHAR(20)		NULL,
	CDSTATUSANALISE		VARCHAR(20)		NULL,
	CDMOTIVOREPROVACAO	VARCHAR(20)		NULL,
	VLLIMITEAPROVADO	DECIMAL(16,7)	NULL,
	CDCONDICAOCOMERCIAL	VARCHAR(20)		NULL,
	DSOBSERVACAO		VARCHAR(4000)	NULL,
	CDUSUARIOEDICAO 	VARCHAR(20)		NULL,
	NMUSUARIOEDICAO 	VARCHAR(100)	NULL,
	DTEDICAOUSUARIO		DATETIME		NULL,
	HREDICAOUSUARIO		VARCHAR(8)		NULL,
	DTTRANSMISSAOPDA	DATETIME		NULL,
	HRTRANSMISSAOPDA	VARCHAR(8)		NULL,
	DTCADASTRO			DATETIME		NULL,
	HRCADASTRO			VARCHAR(8)		NULL,
	FLCNPJRECORRENTE	CHAR(1)			NULL,
	FLNAOPOSSUICOBERTURA CHAR(1)		NULL,
	NUCARIMBO			DECIMAL(9,0)	NULL,	
	FLTIPOALTERACAO		CHAR(1)			NULL,
	DTALTERACAO			DATETIME		NULL,
	HRALTERACAO			VARCHAR(8)		NULL,
	CDUSUARIO			VARCHAR(8)		NOT NULL,
	NMRAZAOSOCIAL       VARCHAR(100)    NULL,
	NUCNPJ              VARCHAR(20)     NULL,
	FLTIPOPESSOA        CHAR(1)    		NULL,
CONSTRAINT PK_TBLVPNOVOCLIENTEANA PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMNOVOCLIENTE, CDNOVOCLIENTE, CDUSUARIO)
)
GO

ALTER TABLE TBLVPNOVOCLIENTE ADD FLOCULTO CHAR(1);
GO

ALTER TABLE TBLVPNOVOCLIENTE ADD FLEMANALISE CHAR(1);
GO

--VERSÃO 5.071

/*------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDO ADD FLEMAILLIBERACAOENVIADO CHAR(1);
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLEMAILLIBERACAOENVIADO CHAR(1);
GO

--VERSÃO 5.080

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/

ALTER TABLE TBLVPCAMPO ADD DSTAGJSON VARCHAR(100);
GO

--VERSÃO 5.083

/*-------------------------------------------------------------------------
Data: 08/11/2017
Autor: Fernando
Descrição: Nova tabela
------------------------------------------------------------------------*/
CREATE TABLE TBLVPTIPOENDERECO (
   CDEMPRESA		VARCHAR(20)		NOT NULL,
   CDTIPOENDERECO   VARCHAR(20)		NOT NULL,
   DSTIPOENDERECO	VARCHAR(100)		NULL,
   NUCARIMBO		DECIMAL(9,0)		NULL,
   CDUSUARIO		VARCHAR(8)		NOT NULL,
   FLTIPOALTERACAO	CHAR(1)				NULL,
   DTALTERACAO		DATETIME			NULL,
   HRALTERACAO		VARCHAR(8)			NULL,
   CONSTRAINT PK_TBLVPTIPOENDERECO PRIMARY KEY(CDTIPOENDERECO, CDUSUARIO)
)
GO

/*-------------------------------------------------------------------------
Data: 09/11/2017
Autor: Fernando
Descrição: Novos campos
------------------------------------------------------------------------*/
ALTER TABLE TBLVPCLIENTEENDERECO ADD CDTIPOENDERECO VARCHAR(20);
GO

ALTER TABLE TBLVPCLIENTEENDATUA ADD CDTIPOENDERECO VARCHAR(20);
GO

--VERSAO 5.087

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
DROP TABLE TBLVPDESCONTOVENDA;
GO

CREATE TABLE TBLVPDESCONTOVENDA (
   CDEMPRESA            VARCHAR(20)          NOT NULL,
   CDUF                 VARCHAR(20)          NOT NULL,
   VLVENDA              DECIMAL(16,7)        NOT NULL,
   VLPCTDESCONTO        DECIMAL(16,7)        NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   NUCARIMBO            DECIMAL(9,0)         NULL,
   CDUSUARIO            VARCHAR(20)          NOT NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   CONSTRAINT PK_TBLVPDESCONTOVENDA PRIMARY KEY (CDEMPRESA, CDUF, VLVENDA, CDUSUARIO)
)
GO

/*------------------------------------------------------------------------
Descrição: Alteração de tabela
------------------------------------------------------------------------*/
DROP TABLE TBLVPINDICEGRUPOPROD;
GO

CREATE TABLE TBLVPINDICEGRUPOPROD (
   CDEMPRESA            VARCHAR(20)          NOT NULL,
   CDREPRESENTANTE      VARCHAR(20)          NOT NULL,
   CDGRUPOPRODUTO1      VARCHAR(20)          NOT NULL,
   CDGRUPOPRODUTO2      VARCHAR(20)          NOT NULL,
   CDGRUPOPRODUTO3      VARCHAR(20)          NOT NULL,
   CDTABELAPRECO        VARCHAR(30)          NOT NULL,
   CDCONDICAOPAGAMENTO  VARCHAR(20)          NOT NULL,
   VLINDICEFINANCEIRO   DECIMAL(16,7)        NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   NUCARIMBO            DECIMAL(9,0)         NULL,
   CDUSUARIO            VARCHAR(20)          NOT NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   CONSTRAINT PK_TBLVPINDICEGRUPOPROD PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDGRUPOPRODUTO1, CDGRUPOPRODUTO2, CDGRUPOPRODUTO3, CDTABELAPRECO, CDCONDICAOPAGAMENTO, CDUSUARIO)
)
GO

--VERSAO 5.089

/*-------------------------------------------------------------------------
Descrição: nova coluna
------------------------------------------------------------------------*/

ALTER TABLE TBLVPPEDIDO ADD FLRENTABILIDADELIBERADA CHAR(1);
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLRENTABILIDADELIBERADA CHAR(1);
GO

--VERSAO 5.090

/*------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDO ADD FLPROMISSORIAIMPRESSA CHAR(1);
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLPROMISSORIAIMPRESSA CHAR(1);
GO

--VERSAO 5.095

/*-------------------------------------------------------------------------
Descrição: Script atualização dos registros de RETORNO - DtAlteracao e HrAlteracao
------------------------------------------------------------------------*/

--SQLSERVER
DECLARE @value VARCHAR(50);
DECLARE @sqlCommand VARCHAR(1000);

DECLARE db_cursor CURSOR FOR  
SELECT DISTINCT DSTABELA FROM TBLVPCONFIGINTEGWEBTC WHERE FLRETORNO = 'S' AND DSTABELA <> 'TBLVPUSUARIOALTERACAO' AND FLTIPOALTERACAO != 'E' ORDER BY DSTABELA
OPEN db_cursor   
FETCH NEXT FROM db_cursor INTO @value   

WHILE @@FETCH_STATUS = 0   
BEGIN   
	SET @sqlCommand = 'UPDATE ' + @value + ' SET DTALTERACAO = ''' + CAST(GETDATE() AS VARCHAR(20)) + ''',HRALTERACAO = ''' + (SELECT CONVERT(VARCHAR(8), GETDATE(), 108)) + ''''; 
	EXEC (@sqlCommand);
	FETCH NEXT FROM db_cursor INTO @value   
END   

SET @sqlCommand = 'UPDATE TBLVPUSUARIOCARIMBO SET DTALTERACAO = ''' + CAST(GETDATE() AS VARCHAR(20)) + ''',HRALTERACAO = ''' + (SELECT CONVERT(VARCHAR(8), GETDATE(), 108)) + ''''; 
EXEC (@sqlCommand);

CLOSE db_cursor   
DEALLOCATE db_cursor
--/SQLSERVER

--ORACLE
DECLARE
    v_value VARCHAR(50) := '';
    v_sqlCommand VARCHAR(1000) := '';
BEGIN
    FOR E IN
      (
        SELECT DISTINCT DSTABELA FROM TBLVPCONFIGINTEGWEBTC WHERE FLRETORNO = 'S' AND DSTABELA <> 'TBLVPUSUARIOALTERACAO' AND FLTIPOALTERACAO != 'E' ORDER BY DSTABELA
      ) LOOP
        v_value := E.DSTABELA;
        v_sqlCommand := 'UPDATE ' || v_value || ' SET DTALTERACAO = ''' || TO_DATE(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') || ''',' || ' HRALTERACAO = ''' || TO_CHAR(SYSDATE, 'HH24:MI:SS') || '''';
        EXECUTE IMMEDIATE  (v_sqlCommand);
    END LOOP;
    v_sqlCommand := 'UPDATE TBLVPUSUARIOCARIMBO SET DTALTERACAO = ''' || TO_DATE(SYSDATE, 'YYYY-MM-DD HH24:MI:SS') || ''',' || ' HRALTERACAO = ''' || TO_CHAR(SYSDATE, 'HH24:MI:SS') || '''';
    EXECUTE IMMEDIATE  v_sqlCommand;
END;
--/ORACLE

--VERSAO 5.097

/*-------------------------------------------------------------------------
Descrição: Adicão de coluna - NFE e ITEMNFE
------------------------------------------------------------------------*/
ALTER TABLE TBLVPNFE ADD VLTOTALPRODUTOSNFE DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMNFE ADD VLTOTALSTITEM DECIMAL(16,7);
GO

--VERSAO 5.099

/*------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPRODUTO ADD VLPCTCUSTOVARIAVEL DECIMAL(16,7);
GO

ALTER TABLE TBLVPEMPRESA ADD VLPCTCSLL DECIMAL(16,7);
GO

ALTER TABLE TBLVPEMPRESA ADD VLPCTCPP DECIMAL(16,7);
GO

--VERSAO 5.100

/*-------------------------------------------------------------------------
Descrição: Novas Colunas
------------------------------------------------------------------------*/

ALTER TABLE TBLVPTABELAPRECO ADD DTINICIAL DATETIME NULL;
GO

ALTER TABLE TBLVPTABELAPRECO ADD DTFINAL DATETIME NULL;
GO

ALTER TABLE TBLVPCONDPAGTOTABPRECO ADD DTINICIAL DATETIME NULL;
GO

ALTER TABLE TBLVPCONDPAGTOTABPRECO ADD DTFINAL DATETIME NULL;
GO

ALTER TABLE TBLVPCONDPAGTOTABPRECO ADD QTMINVALOR DECIMAL(16,7) NULL;
GO

ALTER TABLE TBLVPCONDPAGTOTABPRECO ADD QTMINPRODUTO DECIMAL(9,0) NULL;
GO

--VERSAO 5.102

/*------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPITEMPEDIDO ADD VLTOTALMARGEMITEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLTOTALMARGEMITEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDO ADD VLTOTALMARGEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDOERP ADD VLTOTALMARGEM DECIMAL(16,7);
GO

--VERSAO 5.103

/*------------------------------------------------------------------------
Descrição: Nova tabela
------------------------------------------------------------------------*/
CREATE TABLE TBLVPCLIENTESOCIO (
	CDEMPRESA 			VARCHAR(20) 	NOT NULL,
	CDREPRESENTANTE 	VARCHAR(20)		NOT NULL,
	CDCLIENTE 			VARCHAR(20)		NOT NULL,
	CDSOCIO 			VARCHAR(20) 	NOT NULL,
	NUCNPJ 				VARCHAR(20) 	NULL,
	NMRAZAOSOCIAL 		VARCHAR(100) 	NULL,
	DTENTRADASOCIO 		DATETIME 		NULL,
	VLPCTPARTICIPACAO 	DECIMAL(16,7)	NULL,
	NUCARIMBO			DECIMAL(9,0)	NULL,
	FLTIPOALTERACAO 	CHAR(1) 		NULL,
	DTALTERACAO 		DATETIME		NULL,
	HRALTERACAO 		VARCHAR(8)		NULL,
	CDUSUARIO			VARCHAR(8) 		NOT NULL,
	CONSTRAINT PK_TBLVPCLIENTESOCIO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDCLIENTE, CDSOCIO, CDUSUARIO)
)
GO

--VERSAO 5.112

/*-------------------------------------------------------------------------
Descrição: Nova tabela
------------------------------------------------------------------------*/
CREATE TABLE TBLVPBONIFICACAOSALDO (
   CDEMPRESA            VARCHAR(20)          NOT NULL,
   CDREPRESENTANTE      VARCHAR(20)          NOT NULL,
   FLORIGEMSALDO        CHAR(1)              NOT NULL,
   VLSALDO              DECIMAL(16,7)        NULL,
   DSCONTROLEATUALIZACAO VARCHAR(40)          NULL,
   NUCARIMBO            DECIMAL(9,0)         NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   CDUSUARIO            VARCHAR(8)           NOT NULL,
   CONSTRAINT PK_TBLVPBONIFICACAOSALDO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, FLORIGEMSALDO, CDUSUARIO)
)
GO

ALTER TABLE TBLVPPEDIDO ADD FLSALDOBONILIBERADOSENHA CHAR(1);
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLSALDOBONILIBERADOSENHA CHAR(1);
GO

--VERSAO 5.116

/*------------------------------------------------------------------------
Descrição: Novas tabelas
------------------------------------------------------------------------*/
CREATE TABLE TBLVPSUGVENDAPERSON (
   CDSUGVENDAPERSON     VARCHAR(20)          NOT NULL,
   DSSUGVENDAPERSON     VARCHAR(100)         NULL,
   DSSUGVENDAPERSONABREV VARCHAR(20)          NULL,
   DTVIGENCIAINICIAL    DATETIME             NULL,
   DTVIGENCIAFINAL      DATETIME             NULL,
   NURELEVANCIA         DECIMAL(9,0)         NULL,
   IMSUGVENDAPERSON     VARBINARY(MAX)       NULL,
   DSCOMANDOCLIENTE     TEXT                 NULL,
   DSCOMANDOPRODUTO     TEXT                 NULL,
   NUCARIMBO            DECIMAL(9,0)         NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   CDUSUARIO            VARCHAR(8)           NOT NULL,
   CONSTRAINT PK_TBLVPSUGVENDAPERSON PRIMARY KEY (CDSUGVENDAPERSON, CDUSUARIO)
)
GO

CREATE TABLE TBLVPSUGVENDAPERSONCLI (
	CDEMPRESA		 		VARCHAR(20) 	NOT NULL,
	CDCLIENTE 				VARCHAR(20) 	NOT NULL,
	CDSUGVENDAPERSON 		VARCHAR(20) 	NOT NULL,
	NUCARIMBO             	DECIMAL(9,0)    NULL,
	FLTIPOALTERACAO      	CHAR(1)         NULL,
	DTALTERACAO       		DATETIME        NULL,
	HRALTERACAO       		VARCHAR(8)      NULL,
	CDUSUARIO             	VARCHAR(8)      NOT NULL, 
	CONSTRAINT PK_TBLVPSUGVENDAPERSONCLI PRIMARY KEY (CDEMPRESA, CDCLIENTE, CDSUGVENDAPERSON, CDUSUARIO)
)
GO

CREATE TABLE TBLVPSUGVENDAPERSONPROD (
	CDEMPRESA		 		VARCHAR(20) 	NOT NULL,
	CDPRODUTO		 		VARCHAR(20) 	NOT NULL,
	CDSUGVENDAPERSON 		VARCHAR(20) 	NOT NULL,
	NUCARIMBO             	DECIMAL(9,0)    NULL,
	FLTIPOALTERACAO      	CHAR(1)         NULL,
	DTALTERACAO       		DATETIME        NULL,
	HRALTERACAO       		VARCHAR(8)      NULL,
	CDUSUARIO             	VARCHAR(8)      NOT NULL,
	CONSTRAINT PK_TBLVPSUGVENDAPERSONPROD PRIMARY KEY (CDEMPRESA, CDPRODUTO, CDSUGVENDAPERSON, CDUSUARIO)
)
GO

ALTER TABLE TBLVPITEMPEDIDO ADD FLSUGVENDAPERSON CHAR(1);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD FLSUGVENDAPERSON CHAR(1);
GO

ALTER TABLE TBLVPGIROPRODUTO ADD VLMEDIOHISTORICO DECIMAL(16,7);
GO

ALTER TABLE TBLVPGIROPRODUTO ADD QTDMEDIAHISTORICO DECIMAL(16,7);
GO

ALTER TABLE TBLVPCLIENTE ADD VLTICKETMEDIO DECIMAL(16,7);
GO


--VERSAO 5.120

/*-------------------------------------------------------------------------
Data: 31/01/2018
Autor: Fernando
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPITEMPEDIDO ADD VLTOTALPRECOCUSTO DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLTOTALPRECOCUSTO DECIMAL(16,7);
GO


--VERSAO 5.123

/*-------------------------------------------------------------------------
Data: 03/11/2017
Autor: Renan
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPCAMPO ADD DSFILTRORELACIONADO VARCHAR(30);
GO

--VERSAO 5.125

/*------------------------------------------------------------------------
	Nova coluna
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPTRIBUTACAOCONFIG ADD FLAPLICAREDUCAOBASEICMSRETIDO CHAR(1);
GO


--VERSAO 5.135

/*-------------------------------------------------------------------------
Descrição: NOVA TABELA
------------------------------------------------------------------------*/
CREATE TABLE TBLVPPERSONALIZACAO (
   CDSISTEMA            DECIMAL(9)           NOT NULL,
   CDPERSONALIZACAO		DECIMAL(9)           NOT NULL,
   FLPADRAO				CHAR(1)				 NOT NULL,
   IMPERSONALIZACAO		VARBINARY(MAX)		 NOT NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   NUCARIMBO            DECIMAL(9)           NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   CDUSUARIO			VARCHAR(8)			 NOT NULL,
   CONSTRAINT PK_TBLVPPERSONALIZACAO PRIMARY KEY (CDSISTEMA, CDPERSONALIZACAO, FLPADRAO, CDUSUARIO)
)
GO

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPCLIENTE ADD DTCADASTRO DATETIME;
GO

/*-------------------------------------------------------------------------
Data: 09/02/2018
Autor: Renan
Descrição: Alteração de coluna
------------------------------------------------------------------------*/
--SQLSERVER

EXEC SP_RENAME 'TBLVPSUGVENDAPERSON.NUPRIORIDADESUGESTAO', 'NURELEVANCIA', 'COLUMN';
GO

--/SQLSERVER

--ORACLE

ALTER TABLE TBLVPSUGVENDAPERSON RENAME COLUMN NUPRIORIDADESUGESTAO to NURELEVANCIA;

--/ORACLE

--POSTGRES

ALTER TABLE TBLVPSUGVENDAPERSON RENAME COLUMN NUPRIORIDADESUGESTAO to NURELEVANCIA;

--/POSTGRES

--VERSAO 5.148

/*-------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPCLIENTE ADD VLMAXTITULOSATRASO DECIMAL(16,7);
GO

ALTER TABLE TBLVPCLIENTE ADD NUDIASTOLERANCIAATRASO DECIMAL(9,0);
GO

--VERSAO 5.151

ALTER TABLE TBLVPPRODUTO ADD FLIGNORAVALORMINPEDIDO CHAR(1);
GO

ALTER TABLE TBLVPCATEGORIA ADD VLPCTDESCESPECIAL DECIMAL(16,7);
GO

ALTER TABLE TBLVPCATEGORIA ADD VLPCTDESCATACADO DECIMAL(16,7);
GO

ALTER TABLE TBLVPCATEGORIA ADD FLTIPOCATEGORIA CHAR(1);
GO

ALTER TABLE TBLVPCATEGORIA ADD VLMINPEDIDOESPECIAL DECIMAL(16,7);
GO

ALTER TABLE TBLVPCATEGORIA ADD VLMINPEDIDOATACADO DECIMAL(16,7);
GO

ALTER TABLE TBLVPTABELAPRECO ADD FLPERMITEDESCONTO CHAR(1);
GO

ALTER TABLE TBLVPPEDIDO ADD VLPCTDESC2 DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDO ADD VLPCTDESC3 DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDOERP ADD VLPCTDESC2 DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDOERP ADD VLPCTDESC3 DECIMAL(16,7);
GO

--VERSAO 5.152

/*-------------------------------------------------------------------------
Descrição: Tabelas
------------------------------------------------------------------------*/
CREATE TABLE TBLVPREMESSAESTOQUE (
	CDEMPRESA			VARCHAR(20)		NOT NULL,
	CDREPRESENTANTE		VARCHAR(20)		NOT NULL,
	NUNOTAREMESSA		VARCHAR(20)		NOT NULL,
	NUSERIEREMESSA		VARCHAR(5)		NOT NULL,
	CDLOCALESTOQUE		VARCHAR(20)			NULL,
	DTREMESSA			DATETIME			NULL,
	HRREMESSA			VARCHAR(8)			NULL,
	VLCHAVEACESSO		VARCHAR(50)			NULL,
	FLESTOQUELIBERADO	CHAR(1)				NULL,
	CDUSUARIO			VARCHAR(8)		NOT NULL,
	NUCARIMBO			DECIMAL(9,0)		NULL,
	FLTIPOALTERACAO		CHAR(1)				NULL,
	DTALTERACAO			DATETIME			NULL,
	HRALTERACAO			VARCHAR(8)			NULL,
CONSTRAINT PK_TBLVPREMESSAESTOQUE PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, NUNOTAREMESSA, NUSERIEREMESSA, CDUSUARIO)
)
GO

CREATE TABLE TBLVPITEMPEDIDOREMESSA (
	CDEMPRESA			VARCHAR(20)		NOT NULL,
	CDREPRESENTANTE		VARCHAR(20)		NOT NULL,
	FLORIGEMPEDIDO		CHAR(1)			NOT NULL,
	NUPEDIDO			VARCHAR(30)		NOT NULL,
	CDPRODUTO			VARCHAR(20)		NOT	NULL,
	FLTIPOITEMPEDIDO	CHAR(1)			NOT NULL,
	NUSEQPRODUTO		DECIMAL(9,0)	NOT	NULL,
	CDLOCALESTOQUE		VARCHAR(20)		NOT NULL,
	NUNOTAREMESSA		VARCHAR(20)		NOT NULL,
	NUSERIEREMESSA		VARCHAR(5)		NOT NULL,
	QTESTOQUECONSUMIDO	DECIMAL(16,7)	    NULL,
	CDUSUARIO			VARCHAR(8)		NOT NULL,
	NUCARIMBO			DECIMAL(9,0)		NULL,
	FLTIPOALTERACAO		CHAR(1)				NULL,
	DTALTERACAO			DATETIME			NULL,
	HRALTERACAO			VARCHAR(8)			NULL,
CONSTRAINT PK_TBLVPITEMPEDIDOREMESSA PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDLOCALESTOQUE, NUNOTAREMESSA, NUSERIEREMESSA, CDUSUARIO)
)
GO

CREATE TABLE TBLVPSERIENFE (
	CDEMPRESA			VARCHAR(20)		NOT NULL,
	CDREPRESENTANTE		VARCHAR(20)		NOT NULL,
	NUSERIENFE			DECIMAL(9,0)	NOT NULL,
	NUPROXIMONUMERO		DECIMAL(9,0)		NULL,
	NUPROXIMONUMEROORG	DECIMAL(9,0)		NULL,
	CDUSUARIOALTERACAO	VARCHAR(20)			NULL,
	CDUSUARIO			VARCHAR(8)		NOT NULL,
	NUCARIMBO			DECIMAL(9,0)		NULL,
	FLTIPOALTERACAO		CHAR(1)				NULL,
	DTALTERACAO			DATETIME			NULL,
	HRALTERACAO			VARCHAR(8)			NULL,
CONSTRAINT PK_TBLVPSERIENFE PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, NUSERIENFE, CDUSUARIO)
)
GO

ALTER TABLE TBLVPPRODUTO ADD FLCIGARRO CHAR(1);
GO

ALTER TABLE TBLVPPRODUTO ADD DSNCMPRODUTO VARCHAR(20);
GO

ALTER TABLE TBLVPPRODUTO ADD NUCFOPPRODUTO VARCHAR(20);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD VLTOTALBASESTITEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD VLTOTALBASEICMSITEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLTOTALBASESTITEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLTOTALBASEICMSITEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPTRIBUTACAOCONFIG ADD FLUTILIZAVALORFIXOIMPOSTOS CHAR(1);
GO

ALTER TABLE TBLVPITEMNFE ADD FLCIGARRO CHAR(1);
GO

ALTER TABLE TBLVPITEMNFE ADD DSNCMPRODUTO VARCHAR(20);
GO

ALTER TABLE TBLVPITEMNFE ADD NUCFOPPRODUTO VARCHAR(20);
GO

ALTER TABLE TBLVPITEMNFE ADD VLTOTALBASESTITEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMNFE ADD VLTOTALBASEICMSITEM DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMNFE ADD VLDESPESAACESSORIA DECIMAL(16,7);
GO

ALTER TABLE TBLVPTRANSPORTADORA ADD NUCNPJ VARCHAR(20);
GO

ALTER TABLE TBLVPTRANSPORTADORA ADD NUPLACA VARCHAR(8);	
GO

ALTER TABLE TBLVPNFE ADD CDTRANSPORTADORA VARCHAR(20);
GO

ALTER TABLE TBLVPTIPOPEDIDO ADD DSNATUREZAOPERACAO VARCHAR(60);
GO

ALTER TABLE TBLVPNFE ADD FLAMBIENTE CHAR(1);
GO

ALTER TABLE TBLVPUF ADD CDUFIBGE VARCHAR(20);
GO

ALTER TABLE TBLVPPRODUTOTIPOPED ADD NUCFOPPRODUTO VARCHAR(20);
GO

--VERSAO 5.154

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/

ALTER TABLE TBLVPTIPOPEDIDO ADD FLBLOQUEIAREPLICARPEDIDO CHAR(1);
GO

--VERSAO 5.155

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/

ALTER TABLE TBLVPPESQUISAMERCADO ADD CDUSUARIOEMISSAO VARCHAR(20);
GO


--VERSAO 5.157

/*-------------------------------------------------------------------------
Descrição: Tabela GrupoProdForn
------------------------------------------------------------------------*/
CREATE TABLE TBLVPGRUPOPRODFORN (
  CDEMPRESA			VARCHAR(20)	 NOT NULL,
  CDFORNECEDOR		VARCHAR(20)	 NOT NULL,
  CDGRUPOPRODUTO1	VARCHAR(20)  NOT NULL,
  NUCARIMBO         DECIMAL(9,0) NULL,
  FLTIPOALTERACAO	CHAR(1)		 NULL,
  DTALTERACAO		DATETIME	 NULL,
  HRALTERACAO		VARCHAR(8)	 NULL,
  CDUSUARIO         VARCHAR(8)   NOT NULL, 
  CONSTRAINT PK_TBLVPGRUPOPRODFORN PRIMARY KEY(CDEMPRESA, CDFORNECEDOR, CDGRUPOPRODUTO1, CDUSUARIO)
)
GO

ALTER TABLE TBLVPITEMPEDIDO ADD QTESTOQUECLIENTE DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD QTESTOQUECLIENTE DECIMAL(16,7);
GO

ALTER TABLE TBLVPTRANSPORTADORA ADD NUINSCRICAOESTADUAL VARCHAR(20);
GO

ALTER TABLE TBLVPTRANSPORTADORA ADD DSLOGRADOURO VARCHAR(100);
GO

ALTER TABLE TBLVPTRANSPORTADORA ADD CDCIDADE VARCHAR(20);
GO

ALTER TABLE TBLVPTRANSPORTADORA ADD CDUF VARCHAR(20);
GO

ALTER TABLE TBLVPEMPRESA ADD NUVERSAOEMISSAONFE VARCHAR(20);
GO

ALTER TABLE TBLVPEMPRESA ADD CDREGIMETRIBUTARIO CHAR(1);
GO

ALTER TABLE TBLVPEMPRESA ADD NULOGRADOURO VARCHAR(20);
GO

ALTER TABLE TBLVPCLIENTE ADD FLINDICADORIEDEST CHAR(1);
GO

ALTER TABLE TBLVPNFE ADD CDMENSAGEMRETORNO VARCHAR(20);
GO

ALTER TABLE TBLVPNFE ADD DSMENSAGEMRETORNO VARCHAR(100);
GO

ALTER TABLE TBLVPITEMNFE ADD VLPCTPIS DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMNFE ADD VLPCTCOFINS DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMNFE ADD QTPESO DECIMAL(16,7);
GO

ALTER TABLE TBLVPNFE ADD CDCLIENTE VARCHAR(20);
GO

ALTER TABLE TBLVPNFE ADD CDTIPOPEDIDO VARCHAR(20);
GO

--VERSAO 5.164

/*-------------------------------------------------------------------------
Descrição: Criação de tabela
------------------------------------------------------------------------*/

CREATE TABLE TBLVPPRAZOENTREGA (
   CDEMPRESA		VARCHAR(20)	  NOT NULL,
   CDREPRESENTANTE	VARCHAR(20)	  NOT NULL,
   CDPRODUTO		VARCHAR(20)   NOT NULL,
   QTITEM    		DECIMAL(16,7) NOT NULL,
   NUDIASENTREGA    DECIMAL(13,0)     NULL,
   CDUSUARIO		VARCHAR(8)	  NOT NULL,
   NUCARIMBO		DECIMAL(9,0)	  NULL,
   FLTIPOALTERACAO  CHAR(1)			  NULL,
   DTALTERACAO		DATETIME		  NULL,
   HRALTERACAO		VARCHAR(8)		  NULL,
   CONSTRAINT PK_TBLVPPRAZOENTREGA PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDPRODUTO, QTITEM, CDUSUARIO)
)
GO

/*-------------------------------------------------------------------------
Descrição: Adicionado coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPITEMPEDIDO ADD NUDIASPRAZOENTREGA DECIMAL(13,0) NULL;
GO

--VERSAO 5.165

/*------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPTITULOFINANCEIRO ADD CDTIPOPAGAMENTO VARCHAR(20) NULL;
GO


--VERSAO 5.166

/*-------------------------------------------------------------------------
Descrição: Alteração do tamanho da coluna 
------------------------------------------------------------------------*/ 
ALTER TABLE TBLVPENDERECOGPSPDA DROP CONSTRAINT PK_TBLVPENDERECOGPSPDA;
GO

--SQLSERVER
ALTER TABLE TBLVPENDERECOGPSPDA ALTER COLUMN DSESTADO VARCHAR(20) NOT NULL;
GO
--/SQLSERVER

--ORACLE
DROP INDEX PK_TBLVPENDERECOGPSPDA;
ALTER TABLE TBLVPENDERECOGPSPDA MODIFY DSESTADO VARCHAR(20);
--/ORACLE

--POSTGRES
DROP INDEX PK_TBLVPENDERECOGPSPDA;
ALTER TABLE TBLVPENDERECOGPSPDA ALTER COLUMN DSESTADO SET DATA TYPE VARCHAR(20);
--/POSTGRES

ALTER TABLE TBLVPENDERECOGPSPDA ADD CONSTRAINT PK_TBLVPENDERECOGPSPDA PRIMARY KEY (DSBAIRRO, DSCIDADE, DSESTADO, DSLOGRADOURO, DSCEP, NULOGRADOURO, CDUSUARIO);
GO

--VERSAO 5.169

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPRODUTO ADD NUNIVELGRADEOBRIGATORIO DECIMAL(9,0);
GO


--VERSAO 5.172

/*-------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDO ADD NUCNPJTRANSPORTADORA VARCHAR(20);
GO

ALTER TABLE TBLVPPEDIDOERP ADD NUCNPJTRANSPORTADORA VARCHAR(20);
GO

--VERSAO 5.173

/*------------------------------------------------------------------------
Descrição: Tabela ValorizacaoProd
-------------------------------------------------------------------------*/

CREATE TABLE TBLVPVALORIZACAOPROD (
	CDEMPRESA 				VARCHAR(20) 	NOT NULL, 
	CDREPRESENTANTE 		VARCHAR(20) 	NOT NULL, 
	CDPRODUTO 				VARCHAR(20) 	NOT NULL, 
	CDPRODUTOVALORIZACAO 	VARCHAR(20) 	NOT NULL, 
	QTITEM 					DECIMAL(9,0) 		NULL, 
	VLUNITARIO 				DECIMAL(16,7) 		NULL, 
	VLTOTALITEM 			DECIMAL(16,7) 		NULL, 
	DSOBSERVACAO 			VARCHAR(255) 		NULL, 
	DTVALORIZACAO 			DATETIME 			NULL, 
	HRVALORIZACAO 			VARCHAR(8) 			NULL, 
	FLTIPOALTERACAO 		CHAR(1) 			NULL, 
	DTALTERACAO 			DATETIME 			NULL, 
	HRALTERACAO 			VARCHAR(8) 			NULL, 
	NUCARIMBO 				DECIMAL(9,0) 		NULL, 
	CDUSUARIO 				VARCHAR(8) 		NOT NULL, 
	CONSTRAINT 		PK_TBLVPVALORIZACAOPROD 	PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDPRODUTO, CDPRODUTOVALORIZACAO, CDUSUARIO)
)
GO


--VERSAO 5.178

/*-------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDOBOLETO ADD CDPAGAMENTOPEDIDO VARCHAR(20) DEFAULT '0' NOT NULL;
GO

ALTER TABLE TBLVPPEDIDOBOLETO ADD CDBANCO VARCHAR(20);
GO

ALTER TABLE TBLVPPEDIDOBOLETO DROP CONSTRAINT PK_TBLVPPEDIDOBOLETO;
GO

--ORACLE
DROP INDEX PK_TBLVPPEDIDOBOLETO;
--/ORACLE

--POSTGRES
DROP INDEX PK_TBLVPPEDIDOBOLETO;
--/POSTGRES

ALTER TABLE TBLVPPEDIDOBOLETO ADD CONSTRAINT PK_TBLVPPEDIDOBOLETO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, NUPEDIDO, FLORIGEMPEDIDO, NUSEQUENCIABOLETOPEDIDO, CDPAGAMENTOPEDIDO, CDUSUARIO);
GO

ALTER TABLE TBLVPPEDIDO DROP COLUMN FLBOLETOCONTIMPRESSO;
GO

ALTER TABLE TBLVPPEDIDOERP DROP COLUMN FLBOLETOCONTIMPRESSO;
GO

DROP TABLE TBLVPPEDIDOBOLETOCONT;
GO

ALTER TABLE TBLVPCLIENTE ADD FLBOLETOACEITE CHAR(1);
GO

ALTER TABLE TBLVPSERIENFE ADD FLEXCLUSIVACONT CHAR(1);
GO

ALTER TABLE TBLVPBANCO ADD FLMODOBOLETO CHAR(1);
GO

ALTER TABLE TBLVPBANCO ADD NUAGENCIA VARCHAR(20);
GO

ALTER TABLE TBLVPBANCO ADD NUCONTA VARCHAR(20);
GO

ALTER TABLE TBLVPBANCO ADD DSLOCALPAGAMENTO VARCHAR(100);
GO

ALTER TABLE TBLVPEMPRESA ADD NUCIP VARCHAR(3);
GO

ALTER TABLE TBLVPTIPOPAGAMENTO ADD VLPCTJUROS DECIMAL(16,7);
GO

ALTER TABLE TBLVPTIPOPAGAMENTO ADD VLPCTMULTADIARIO DECIMAL(16,7);
GO

ALTER TABLE TBLVPTIPOPAGAMENTO ADD VLPCTMULTA DECIMAL(16,7);
GO

ALTER TABLE TBLVPTIPOPAGAMENTO ADD NUDIASPROTESTO DECIMAL(9,0);
GO

ALTER TABLE TBLVPTIPOPAGAMENTO ADD NUDIASMULTA DECIMAL(9,0);
GO

ALTER TABLE TBLVPTIPOPAGAMENTO ADD NUDIASMAXPAGAMENTO DECIMAL(9,0);
GO

ALTER TABLE TBLVPBANCO ADD NUBYTEBOLETO DECIMAL(1,0);
GO

ALTER TABLE TBLVPBANCO ADD DSCARTEIRA VARCHAR(20);
GO

ALTER TABLE TBLVPNFE ADD HREMISSAO VARCHAR(8);
GO

ALTER TABLE TBLVPITEMNFE ADD DSCESTPRODUTO VARCHAR(20);
GO

ALTER TABLE TBLVPPRODUTO ADD DSCESTPRODUTO VARCHAR(20);
GO

ALTER TABLE TBLVPUF ADD DSTIMEZONEUF VARCHAR(6);
GO

--VERSÃO 5.181

/*-------------------------------------------------------------------------
Descrição: Remoção de Tabela
------------------------------------------------------------------------*/

DROP TABLE TBLVPPEDIDOBOLETOCONT;

/*-------------------------------------------------------------------------
Descrição: Alteração de colunas
------------------------------------------------------------------------*/
--SQLSERVER
ALTER TABLE TBLVPFAIXABOLETO ALTER COLUMN NUULTIMOBOLETO DECIMAL(15,0)
GO

ALTER TABLE TBLVPFAIXABOLETO ALTER COLUMN NUBOLETOFIM DECIMAL(15,0)
GO

ALTER TABLE TBLVPFAIXABOLETO ALTER COLUMN NUBOLETOFIM DECIMAL(15,0)
GO
--/SQLSERVER

--ORACLE
ALTER TABLE TBLVPFAIXABOLETO MODIFY NUULTIMOBOLETO DECIMAL(15,0);

ALTER TABLE TBLVPFAIXABOLETO MODIFY NUBOLETOFIM DECIMAL(15,0);

ALTER TABLE TBLVPFAIXABOLETO MODIFY NUBOLETOINICIO DECIMAL(15,0);
--/ORACLE

--POSTGRES
ALTER TABLE TBLVPFAIXABOLETO ALTER COLUMN NUULTIMOBOLETO TYPE DECIMAL(15,0);

ALTER TABLE TBLVPFAIXABOLETO ALTER COLUMN NUBOLETOFIM TYPE DECIMAL(15,0);

ALTER TABLE TBLVPFAIXABOLETO ALTER COLUMN NUBOLETOINICIO TYPE DECIMAL(15,0);
--/POSTGRES

--VERSÃO 5.182

/*-------------------------------------------------------------------------
Descrição: Nova tabela
------------------------------------------------------------------------*/
CREATE TABLE TBLVPSTATUSORCAMENTO (
   CDEMPRESA            VARCHAR(20) NOT NULL,
   CDREPRESENTANTE      VARCHAR(20) NOT NULL,
   CDSTATUSORCAMENTO    VARCHAR(20) NOT NULL,
   DSSTATUSORCAMENTO    VARCHAR(100),
   FLSTATUSCANCELAMENTO CHAR(1),
   FLSTATUSINICIAL      CHAR(1),
   CDUSUARIO		    VARCHAR(8)	NOT NULL,
   NUCARIMBO		    DECIMAL(9,0),
   FLTIPOALTERACAO      CHAR(1),
   DTALTERACAO		    DATETIME,
   HRALTERACAO		    VARCHAR(8),
   CONSTRAINT PK_TBLVPSTATUSORCAMENTO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDSTATUSORCAMENTO, CDUSUARIO)
)
GO

/*-------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDO ADD CDSTATUSORCAMENTO VARCHAR(20);
GO

ALTER TABLE TBLVPPEDIDO ADD DSOBSORCAMENTO VARCHAR(500);
GO

ALTER TABLE TBLVPPEDIDOERP ADD CDSTATUSORCAMENTO VARCHAR(20);
GO

ALTER TABLE TBLVPPEDIDOERP ADD DSOBSORCAMENTO VARCHAR(500);
GO

--VERSAO 5.183

/*------------------------------------------------------------------------
Descrição: Nova coluna
-------------------------------------------------------------------------*/

ALTER TABLE TBLVPPRODUTOTABPRECO ADD CDGRUPOPRODUTO4 VARCHAR(20);
GO

--VERSAO 5.185

/*-------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPTIPOPEDIDO ADD FLMODOESTOQUE CHAR(1);
GO

ALTER TABLE TBLVPEMPRESA ADD CDLOCALESTOQUE VARCHAR(20);
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLMODOESTOQUE CHAR(1);
GO

ALTER TABLE TBLVPPEDIDO ADD FLMODOESTOQUE CHAR(1);
GO

--VERSAO 5.187

/*------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPVISITA ADD FLVISITAAGENDADA CHAR(1);
GO


--VERSAO 5.192

/*------------------------------------------------------------------------
Descrição: Novas tabelas
------------------------------------------------------------------------*/
CREATE TABLE TBLVPDEPOSITOBANCARIO (
    CDEMPRESA               VARCHAR(20) NOT NULL,
    CDREPRESENTANTE         VARCHAR(20) NOT NULL,
    DTFECHAMENTODIARIO      DATETIME NOT NULL,
    NUDEPOSITOBANCARIO      VARCHAR(20) NOT NULL,
    VLTOTALDEPOSITOBANCARIO DECIMAL(16,7),
    DTDEPOSITOBANCARIO      DATETIME,
    CDUSUARIO		    	VARCHAR(8) NOT NULL,
    NUCARIMBO		    	DECIMAL(9,0),
    FLTIPOALTERACAO         CHAR(1),
    HRALTERACAO             VARCHAR(8),
    DTALTERACAO             DATETIME,
    CONSTRAINT PK_TBLVPDEPOSITOBANCARIO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, DTFECHAMENTODIARIO, NUDEPOSITOBANCARIO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPFECHAMENTODIARIO (
    CDEMPRESA               	VARCHAR(20) NOT NULL,
    CDREPRESENTANTE         	VARCHAR(20) NOT NULL,
    DTFECHAMENTODIARIO      	DATETIME NOT NULL,
    HRFECHAMENTODIARIO      	VARCHAR(5),
    VLTOTALDEPOSITOBANCARIO 	DECIMAL(16,7),
    DTFINALIZACAO				DATETIME,
    HRFINALIZACAO				VARCHAR(5),
    VLTOTALPEDIDOS 				DECIMAL(16,7),
    VLTOTALRECEITAS 			DECIMAL(16,7),
    VLTOTALVENDAS 				DECIMAL(16,7),
    VLTOTALVENDASDINHEIRO 		DECIMAL(16,7),
    VLTOTALVENDASCHEQUE 		DECIMAL(16,7),
    VLTOTALVENDASBOLETO 		DECIMAL(16,7),
    VLTOTALPAGAMENTOS 			DECIMAL(16,7),
    VLTOTALPAGAMENTOSDINHEIRO 	DECIMAL(16,7),
    VLTOTALPAGAMENTOSCHEQUE 	DECIMAL(16,7),
    VLTOTALPAGAMENTOSBOLETO 	DECIMAL(16,7),
    VLTOTALBONIFICACAO		 	DECIMAL(16,7),
    NUIMPRESSAO				 	DECIMAL(9,0),
    CDUSUARIO		    		VARCHAR(8) NOT NULL,
    NUCARIMBO		    		DECIMAL(9,0),
    FLTIPOALTERACAO 			CHAR(1),
    HRALTERACAO    				VARCHAR(8),
    DTALTERACAO     			DATETIME,
    CONSTRAINT PK_TBLVPFECHAMENTODIARIO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, DTFECHAMENTODIARIO, CDUSUARIO)
)
GO

ALTER TABLE TBLVPREPRESENTANTE ADD CDTRANSPORTADORA VARCHAR(20);
GO

ALTER TABLE TBLVPNFE ADD HRRESPOSTA VARCHAR(8);
GO

ALTER TABLE TBLVPNFE ADD NUPROTOCOLO VARCHAR(20);
GO

ALTER TABLE TBLVPPAGAMENTOPEDIDO ADD DSBANCO VARCHAR(50);
GO

ALTER TABLE TBLVPPAGAMENTOPEDIDO ADD DTCHEQUE DATETIME;
GO

ALTER TABLE TBLVPPAGAMENTOPEDIDOERP ADD DSBANCO VARCHAR(50);
GO

ALTER TABLE TBLVPPAGAMENTOPEDIDOERP ADD DTCHEQUE DATETIME;
GO

ALTER TABLE TBLVPBANCO ADD DSESPECIEBANCO VARCHAR(20);
GO

ALTER TABLE TBLVPBANCO ADD DSMENSAGEMSACADOR VARCHAR(50);
GO


--VERSAO 5.197

/*-------------------------------------------------------------------------
Descrição: Novas tabelas
------------------------------------------------------------------------*/
CREATE TABLE TBLVPLISTATABELAPRECO (
  CDEMPRESA 				VARCHAR(20) NOT NULL,
  CDREPRESENTANTE 			VARCHAR(20) NOT NULL,
  CDLISTATABELAPRECO		DECIMAL(9,0) NOT NULL,
  DSLISTATABELAPRECO        VARCHAR(100) NULL,
  NUCARIMBO                 DECIMAL(9,0)  NULL,
  FLTIPOALTERACAO           CHAR(1) NULL,
  DTALTERACAO               DATETIME NULL,
  HRALTERACAO               VARCHAR(8) NULL,
  CDUSUARIO                 VARCHAR(8) NOT NULL,
  CONSTRAINT PK_TBLVPLISTATABELAPRECO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDLISTATABELAPRECO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPCOLUNATABELAPRECO (
  CDEMPRESA 				VARCHAR(20) NOT NULL,
  CDREPRESENTANTE 			VARCHAR(20) NOT NULL,
  CDCOLUNATABELAPRECO		DECIMAL(9,0) NOT NULL,
  DSCOLUNATABELAPRECO       VARCHAR(100) NULL,
  NUCARIMBO                 DECIMAL(9,0)  NULL,
  FLTIPOALTERACAO           CHAR(1) NULL,
  DTALTERACAO               DATETIME NULL,
  HRALTERACAO               VARCHAR(8) NULL,
  CDUSUARIO                 VARCHAR(8) NOT NULL,
  CONSTRAINT PK_TBLVPCOLUNATABELAPRECO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDCOLUNATABELAPRECO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPHISTVENDALISTTABPRECO (
  CDEMPRESA           VARCHAR(20)  NOT NULL,
  CDREPRESENTANTE     VARCHAR(20)  NOT NULL,
  CDCLIENTE           VARCHAR(20)  NOT NULL,
  CDLISTATABELAPRECO  DECIMAL(9,0) NOT NULL,
  CDCOLUNATABELAPRECO DECIMAL(9,0) NOT NULL,
  CDGRUPOPRODUTO1     VARCHAR(20)  NOT NULL,
  QTREALIZADO         DECIMAL(16,7) NULL,
  VLREALIZADO         DECIMAL(16,7) NULL,
  NUCARIMBO           DECIMAL(9,0)  NULL,
  FLTIPOALTERACAO     CHAR(1) NULL,
  DTALTERACAO         DATETIME NULL,
  HRALTERACAO         VARCHAR(8) NULL,
  CDUSUARIO           VARCHAR(8) NOT NULL,
  CONSTRAINT PK_TBLVPHISTVENDALISTTABPRECO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDCLIENTE, CDLISTATABELAPRECO, CDCOLUNATABELAPRECO, CDGRUPOPRODUTO1, CDUSUARIO)
)
GO

/*-------------------------------------------------------------------------
Descrição: Novo campo
-------------------------------------------------------------------------*/

ALTER TABLE TBLVPSTATUSORCAMENTO ADD FLPERMITEFECHARPEDIDO CHAR(1);
GO


--VERSAO 5.200

/*-------------------------------------------------------------------------
Descrição: Novos campos
-------------------------------------------------------------------------*/

ALTER TABLE TBLVPREPRESENTANTE ADD CDREPRESENTANTEREF VARCHAR(20);
GO

ALTER TABLE TBLVPREPRESENTANTE ADD NMREPRESENTANTEREF VARCHAR(100);
GO

--VERSAO 5.202

/*------------------------------------------------------------------------
Descrição: Nova tabela
-------------------------------------------------------------------------*/
CREATE TABLE TBLVPCONDPAGTOREP(
	CDEMPRESA 			VARCHAR(20)  NOT NULL,
	CDREPRESENTANTE 	VARCHAR(20)  NOT NULL,
	CDCONDICAOPAGAMENTO VARCHAR(40)  NOT NULL,
	CDUSUARIO 			VARCHAR(8) 	 NOT NULL,
	NUCARIMBO 			DECIMAL(9,0) NULL,
	FLTIPOALTERACAO 	CHAR(1) 	 NULL,
	DTALTERACAO 		DATETIME 	 NULL,
	HRALTERACAO 		VARCHAR(8)	 NULL,
	CONSTRAINT PK_TBLVPCONDICAOPAGAMENTOREP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDCONDICAOPAGAMENTO, CDUSUARIO)
)
GO


--VERSAO 5.206

/*------------------------------------------------------------------------
Descrição: Novos campos
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPITEMPEDIDO ADD NUCONVERSAOUNIDADEPU DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD VLINDICEFINANCEIROPU DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD FLDIVIDEMULTIPLICAPU CHAR(1);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD NUCONVERSAOUNIDADEPU DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLINDICEFINANCEIROPU DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD FLDIVIDEMULTIPLICAPU CHAR(1);
GO

ALTER TABLE TBLVPUSUARIO ADD DTULTIMAALTERACAOSENHA DATETIME;
GO

DROP TABLE TBLVPUSUARIOALTERACAO;
GO

CREATE TABLE TBLVPUSUARIOHISTALTERACAO (
   CDSISTEMA            DECIMAL(9)           NOT NULL,
   CDUSUARIO            VARCHAR(20)          NOT NULL,
   DTHISTALTERACAOUSUARIO DATETIME             NOT NULL,
   HRHISTALTERACAOUSUARIO VARCHAR(8)           NOT NULL,
   CDUSUARIOALTERADO    VARCHAR(20)          NULL,
   CDTIPOALTERACAO      VARCHAR(20)          NULL,
   DSTIPOALTERACAO      VARCHAR(100)         NULL,
   NMCOLUNA             VARCHAR(100)         NULL,
   VLCOLUNA             VARCHAR(100)         NULL,
   FLEMAILENVIADO       CHAR(1)              NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   NUCARIMBO            DECIMAL(9)           NULL,
   CONSTRAINT PK_TBLVPUSUARIOHISTALTERACAO PRIMARY KEY (CDSISTEMA, CDUSUARIO, DTHISTALTERACAOUSUARIO, HRHISTALTERACAOUSUARIO)
)
GO

CREATE TABLE TBLVPRESTRICAOSENHAUSUARIO (
   CDRESTRICAO          VARCHAR(20)          NOT NULL,
   DSVALORRESTRITO      VARCHAR(100)         NULL,
   FLTIPOALTERACAO      CHAR(1)              NULL,
   CDUSUARIO            VARCHAR(8)           NOT NULL,
   NUCARIMBO            DECIMAL(9)           NULL,
   DTALTERACAO          DATETIME             NULL,
   HRALTERACAO          VARCHAR(8)           NULL,
   CONSTRAINT PK_TBLVPRESTRICAOSENHAUSUARIO PRIMARY KEY (CDRESTRICAO, CDUSUARIO)
)
GO

--VERSAO 5.207

/*------------------------------------------------------------------------
Descrição: Nova tabela
------------------------------------------------------------------------*/
CREATE TABLE TBLVPRESOURCESWMW (
	CDCHAVE					VARCHAR(20)			NOT NULL,
	BACONTEUDO				VARBINARY(MAX)		NULL,
	FLTIPOALTERACAO 		CHAR(1) 			NULL, 
	DTALTERACAO 			DATETIME 			NULL, 
	HRALTERACAO 			VARCHAR(8) 			NULL, 
	NUCARIMBO 				DECIMAL(9,0) 		NULL, 
	CDUSUARIO 				VARCHAR(8) 			NOT NULL, 
   CONSTRAINT PK_TBLVPRESOURCESWMW PRIMARY KEY (CDCHAVE, CDUSUARIO)
)
GO


--VERSAO 5.208

/*-------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDO ADD DTPAGAMENTO DATETIME;
GO

ALTER TABLE TBLVPPEDIDOERP ADD DTPAGAMENTO DATETIME;
GO

ALTER TABLE TBLVPITEMTABELAPRECO ADD DTVENCIMENTOPRECO DATETIME;
GO

ALTER TABLE TBLVPITEMTABELAPRECO ADD VLPCTTAXA  DECIMAL(16,7);
GO


--VERSAO 5.213

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPTABELAPRECO ADD FLINDICADTENTREGAMANUAL CHAR(1);
GO

--VERSAO 5.214

/*-------------------------------------------------------------------------
Descrição: Nova coluna
Autor: Ronan
------------------------------------------------------------------------*/
ALTER TABLE TBLVPEMPRESA ADD DSEMAIL VARCHAR(100);
GO

--VERSAO 5.215

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPITEMTABELAPRECO ADD VLPRECOMAXIMOCONSUMIDOR DECIMAL(16,7);
GO

--VERSAO 5.217

/*------------------------------------------------------------------------
Novo campo
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPNOVOCLIENTEANA ADD FLPERMITEMULTIPLOSENDERECOS CHAR(1);
GO

ALTER TABLE TBLVPCLIENTE ADD FLPERMITEMULTIPLOSENDERECOS CHAR(1);
GO

--VERSAO 5.229

/*------------------------------------------------------------------------
Novo campo
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPSTATUSANALISECLIENTE ADD FLPERMITEEDICAO CHAR(1);
GO

ALTER TABLE TBLVPTIPOENDERECO ADD NUMINDIASENTREGAPEDIDO DECIMAL(9,0);
GO

ALTER TABLE TBLVPTIPOENDERECO ADD HRLIMITEENVIOPEDIDO VARCHAR(5);
GO

/*------------------------------------------------------------------------
Nova tabela
-------------------------------------------------------------------------*/
CREATE TABLE TBLVPERROENVIO (
	CDEMPRESA		VARCHAR(20)		NOT NULL,
	CDREPRESENTANTE VARCHAR(20)		NOT NULL,
	NMENTIDADE		VARCHAR(30)		NOT NULL,
	DSCHAVE			VARCHAR(255)	NOT NULL,
	CDUSUARIO		VARCHAR(8)		NOT NULL,
	DSERRO			VARCHAR(255)		NULL,
	NUCARIMBO		DECIMAL(9,0)		NULL,
	FLTIPOALTERACAO	CHAR(1)				NULL,
	CONSTRAINT PK_TBLVPERROENVIO PRIMARY KEY(CDEMPRESA,CDREPRESENTANTE,NMENTIDADE,DSCHAVE,CDUSUARIO)
)
GO

/*-------------------------------------------------------------------------
Descrição: NOVAS TABELAS
-------------------------------------------------------------------------*/
CREATE TABLE TBLVPMARCADOR (
   CDMARCADOR           VARCHAR(20)      NOT NULL,
   CDUSUARIO            VARCHAR(8)       NOT NULL, 
   DSMARCADOR           VARCHAR(100)     NULL,
   NMENTIDADE           VARCHAR(30)      NULL,
   DTINICIOVIGENCIA		DATETIME		 NULL,
   DTTERMINOVIGENCIA	DATETIME		 NULL,
   IMMARCADORATIVO		IMAGE			 NULL,
   NUSEQUENCIA			DECIMAL(9,0)	 NULL,
   CDTIPOMARCADOR		DECIMAL(9,0)	 NULL,
   NUCARIMBO            DECIMAL(9,0)     NULL,
   FLTIPOALTERACAO      CHAR(1)          NULL,
   DTALTERACAO       	DATETIME         NULL,
   HRALTERACAO       	VARCHAR(8)       NULL,
   CONSTRAINT PK_TBLVPMARCADOR PRIMARY KEY(CDMARCADOR, CDUSUARIO)
)
GO

CREATE TABLE TBLVPMARCADORCLIENTE (
   CDEMPRESA           VARCHAR(20)      NOT NULL,
   CDREPRESENTANTE     VARCHAR(20)      NOT NULL,
   CDCLIENTE           VARCHAR(20)      NOT NULL,
   CDMARCADOR          VARCHAR(20)      NOT NULL,
   CDUSUARIO           VARCHAR(8)       NOT NULL, 
   NUCARIMBO           DECIMAL(9,0)         NULL,
   FLTIPOALTERACAO     CHAR(1)              NULL,
   DTALTERACAO         DATETIME             NULL,
   HRALTERACAO         VARCHAR(8)           NULL,
   CONSTRAINT PK_TBLVPMARCADORCLIENTE PRIMARY KEY(CDEMPRESA,CDREPRESENTANTE,CDCLIENTE,CDMARCADOR, CDUSUARIO)
)
GO

--VERSAO 5.237

/*-------------------------------------------------------------------------
Descrição: Nova coluna
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPTELA ADD NULIMITEREGISTROS DECIMAL(9,0);
GO

--VERSAO 5.240

/*------------------------------------------------------------------------
Novo campo
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDOCONSIGNACAO ADD CDLOTEPRODUTO VARCHAR(20);
GO

--Versão 5.244
/*-------------------------------------------------------------------------
Data: 15/08/2018
Descrição: Tabela de "PreferenciaFuncao"
-------------------------------------------------------------------------*/

CREATE TABLE TBLVPPREFERENCIAFUNCAO (
	CDSISTEMA				DECIMAL(9)			NOT NULL,
	CDFUNCAO				VARCHAR(20)			NOT NULL,
	CDPREFERENCIA			DECIMAL(9)			NOT NULL,
	CDUSUARIO				VARCHAR(8)			NOT NULL,
	NUCARIMBO				DECIMAL(9,0)			NULL,
	FLTIPOALTERACAO			CHAR(1)					NULL,
	DTALTERACAO				DATETIME				NULL,
	HRALTERACAO				VARCHAR(8)				NULL,
	CONSTRAINT	PK_TBVLPPREFERENCIAFUNCAO	PRIMARY KEY (CDSISTEMA, CDFUNCAO, CDPREFERENCIA, CDUSUARIO)
)
GO

--VERSAO 5.245

/*------------------------------------------------------------------------ 
COLUNA
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPITEMTABELAPRECO ADD VLPCTDESCVALORBASE DECIMAL(16,7);
GO

--VERSAO 5.252

/*-------------------------------------------------------------------------
Descrição: Nova tabela
-------------------------------------------------------------------------*/
CREATE TABLE TBLVPFOTOPRODUTOEMP (
   CDEMPRESA            VARCHAR(20)     NOT NULL,
   CDPRODUTO            VARCHAR(20)     NOT NULL,
   NMFOTO               VARCHAR(100)    NOT NULL,
   CDFOTOPRODUTO        VARCHAR(20)     NULL,
   NUTAMANHO            DECIMAL(9,0)    NULL,
   DTMODIFICACAO        DATETIME        NULL,
   CDUSUARIO            VARCHAR(8)      NOT NULL,
   NUCARIMBO            DECIMAL(9,0)    NULL,
   FLTIPOALTERACAO      CHAR(1)         NULL,
   DTALTERACAO       	DATETIME        NULL,
   HRALTERACAO       	VARCHAR(8)      NULL,
   CONSTRAINT PK_TBLVPFOTOPRODUTOEMP PRIMARY KEY(CDEMPRESA, CDPRODUTO, NMFOTO, CDUSUARIO)
)
GO


--VERSAO 5.254

/*-------------------------------------------------------------------------
Data: 28/08/2018
Descrição: Alteração coluna
-------------------------------------------------------------------------*/
--SQLSERVER
ALTER TABLE TBLVPNFE ALTER COLUMN DSOBSERVACAO VARCHAR(4000);
GO
--/SQLSERVER 

--ORACLE
ALTER TABLE TBLVPNFE MODIFY DSOBSERVACAO VARCHAR(4000);
--/ORACLE

--POSTGRES
ALTER TABLE TBLVPNFE ALTER COLUMN DSOBSERVACAO SET DATA TYPE VARCHAR(4000);
--/POSTGRES

--VERSAO 5.258

/*-------------------------------------------------------------------------
Descrição: Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPUSUARIO ADD DSSENHAEMAIL VARCHAR(256);
GO

--VERSAO 5.259

/*------------------------------------------------------------------------ 
COLUNA
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPLOTEPRODUTO ADD QTESTOQUE DECIMAL(16,7);
GO

ALTER TABLE TBLVPLOTEPRODUTO ADD FLORIGEMESTOQUE CHAR(1) DEFAULT 'E' NOT NULL;
GO
ALTER TABLE TBLVPLOTEPRODUTO DROP CONSTRAINT PK_TBLVPLOTEPRODUTO;
GO

--ORACLE
DROP INDEX PK_TBLVPLOTEPRODUTO;
--/ORACLE

--POSTGRES
DROP INDEX PK_TBLVPLOTEPRODUTO;
--/POSTGRES

ALTER TABLE TBLVPLOTEPRODUTO ADD CONSTRAINT PK_TBLVPLOTEPRODUTO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDPRODUTO, CDLOTEPRODUTO, FLORIGEMESTOQUE, CDUSUARIO);
GO

--VERSAO 5.260

/*-------------------------------------------------------------------------
Descrição: Novas colunas
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPITEMPEDIDO ADD VLPCTMARGEMAGREGADA DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLPCTMARGEMAGREGADA DECIMAL(16,7);
GO

--VERSAO 5.267

/*-------------------------------------------------------------------------
Nova coluna
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDO ADD CDTRIBUTACAOCLIENTE VARCHAR(20);
GO

ALTER TABLE TBLVPPEDIDOERP ADD CDTRIBUTACAOCLIENTE VARCHAR(20);
GO


--VERSAO 5.268

/*-------------------------------------------------------------------------
Data: 12/09/2018
Descrição: Novas colunas
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPPRODUTO ADD NUFRACAO DECIMAL(9,0);
GO

ALTER TABLE TBLVPPRODUTO ADD CDUNIDADEFRACAO VARCHAR(20);
GO

ALTER TABLE TBLVPPRODUTO ADD FLUSAUNIDADEBASEDSFRACAO CHAR(1);
GO

ALTER TABLE TBLVPUNIDADE ADD DSUNIDADEPLURAL VARCHAR(100);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD VLPCTACRESCIMOCONDICAO DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD VLPCTACRESCCLIENTE DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLPCTACRESCIMOCONDICAO DECIMAL(16,7);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD VLPCTACRESCCLIENTE DECIMAL(16,7);
GO

/*-------------------------------------------------------------------------
Descrição: Novas tabelas
------------------------------------------------------------------------*/
CREATE TABLE TBLVPCOMBO(
	CDEMPRESA VARCHAR(20) NOT NULL,
	CDREPRESENTANTE VARCHAR(20) NOT NULL,
	CDCOMBO VARCHAR(20) NOT NULL,
	DSCOMBO VARCHAR(100) NULL,
	DTVIGENCIAINICIAL DATETIME NULL,
	DTVIGENCIAFINAL DATETIME NULL,
	NUCARIMBO DECIMAL(9, 0) NULL,
	FLTIPOALTERACAO CHAR(1) NULL,
	CDUSUARIO VARCHAR(8) NOT NULL,
	DTALTERACAO DATETIME NULL,
	HRALTERACAO VARCHAR(8) NULL,
    CONSTRAINT PK_TBLVPCOMBO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDCOMBO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPITEMCOMBO(
	CDEMPRESA VARCHAR(20) NOT NULL,
	CDREPRESENTANTE VARCHAR(20) NOT NULL,
	CDCOMBO VARCHAR(20) NOT NULL,
	CDPRODUTO VARCHAR(20) NOT NULL,
	NUCARIMBO DECIMAL(9, 0) NULL,
	FLTIPOALTERACAO CHAR(1) NULL,
	CDUSUARIO VARCHAR(8) NOT NULL,
	DTALTERACAO DATETIME NULL,
	HRALTERACAO VARCHAR(8) NULL,
	CONSTRAINT PK_TBLVPITEMCOMBO PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDCOMBO, CDPRODUTO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPRELNOVIDADENOVOCLI (
	CDEMPRESA		VARCHAR(20)		NOT NULL,
	CDREPRESENTANTE VARCHAR(20)		NOT NULL,
	CDNOVOCLIENTE	VARCHAR(20)		NOT NULL,
	CDTIPONOVIDADE	VARCHAR(20)		NOT NULL,
	NMRAZAOSOCIAL	VARCHAR(100)		NULL,
	NUCNPJ			VARCHAR(20)			NULL,
	DSMENSAGEM		VARCHAR(255)		NULL,
	DTGERACAO		DATETIME			NULL,
	CDUSUARIO		VARCHAR(8)		NOT NULL,
	NUCARIMBO		DECIMAL(9,0)		NULL,
	FLTIPOALTERACAO	CHAR(1)				NULL,
	DTALTERACAO     DATETIME            NULL,
   	HRALTERACAO     VARCHAR(8)          NULL,
CONSTRAINT PK_TBLVPRELNOVIDADENOVOCLI PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDNOVOCLIENTE, CDTIPONOVIDADE, CDUSUARIO)
)
GO

--VERSAO 5.270

/*------------------------------------------------------------------------
Descrição: Nova tabela
-------------------------------------------------------------------------*/
CREATE TABLE TBLVPKITREP (
    CDEMPRESA            VARCHAR(20) NOT NULL,
    CDREPRESENTANTE      VARCHAR(20) NOT NULL,
    CDKIT                VARCHAR(20) NOT NULL,
    CDUSUARIO		 VARCHAR(8)	NOT NULL,
    NUCARIMBO		 DECIMAL(9,0),
    FLTIPOALTERACAO      CHAR(1),
    DTALTERACAO		 DATETIME,
    HRALTERACAO		 VARCHAR(8),
    CONSTRAINT PK_TBLVPKITREP PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, CDKIT, CDUSUARIO)
)
GO

/*------------------------------------------------------------------------
Descrição: Novos campos
-------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDO ADD FLPEDIDODIFERENCA CHAR(1);
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLPEDIDODIFERENCA CHAR(1);
GO

ALTER TABLE TBLVPPEDIDO ADD NUPEDIDODIFERENCA VARCHAR(30);
GO

ALTER TABLE TBLVPPEDIDOERP ADD NUPEDIDODIFERENCA VARCHAR(30);
GO

ALTER TABLE TBLVPVALORINDICADOR ADD DTREFERENCIA DATETIME;
GO

ALTER TABLE TBLVPINDICADOR ADD DSVLPADRAOINDICADOR VARCHAR(20);
GO

ALTER TABLE TBLVPINDICADOR ADD NUSEQUENCIA DECIMAL(9,0);
GO

ALTER TABLE TBLVPITEMKIT ADD VLPCTDESCONTO DECIMAL (16,7);
GO

ALTER TABLE TBLVPITEMPEDIDO ADD CDKIT VARCHAR(20);
GO

ALTER TABLE TBLVPITEMPEDIDOERP ADD CDKIT VARCHAR(20);
GO

ALTER TABLE TBLVPITEMTABELAPRECO ADD VLPRECOCUSTO DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDO ADD VLPCTINDICEFINCONDPAGTO DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDOERP ADD VLPCTINDICEFINCONDPAGTO DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDO ADD VLPCTDESCQUANTIDADEPESO DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDOERP ADD VLPCTDESCQUANTIDADEPESO DECIMAL(16,7);
GO

ALTER TABLE TBLVPPEDIDO ADD DSJUSTIFICATIVACANCELAMENTO VARCHAR(500);
GO

ALTER TABLE TBLVPPEDIDOERP ADD DSJUSTIFICATIVACANCELAMENTO VARCHAR(500);
GO

--VERSAO 5.273

/*------------------------------------------------------------------------
Descrição: Novos campos
------------------------------------------------------------------------*/

ALTER TABLE TBLVPRESUMODIA ADD VLSALDOANTERIOR DECIMAL(16,7);
GO

ALTER TABLE TBLVPRESUMODIA ADD VLTOTALPAGAMENTO DECIMAL(16,7);
GO

ALTER TABLE TBLVPRESUMODIA ADD VLTOTALVALORIZACAO DECIMAL(16,7);
GO

ALTER TABLE TBLVPRESUMODIA ADD VLTOTALPROMISSORIA DECIMAL(16,7);
GO

ALTER TABLE TBLVPRESUMODIA ADD VLSALDOFINAL DECIMAL(16,7);
GO

ALTER TABLE TBLVPRESUMODIA ADD DTULTIMOFECHAMENTO DATETIME;
GO

ALTER TABLE TBLVPREMESSAESTOQUE ADD FLTIPOREMESSA CHAR(1);
GO

ALTER TABLE TBLVPREMESSAESTOQUE ADD CDPEDIDOESTOQUE VARCHAR(20);
GO

/*------------------------------------------------------------------------
Descrição: Nova tabela
------------------------------------------------------------------------*/

CREATE TABLE TBLVPSALDOVENDAREP (
	CDEMPRESA				VARCHAR(20)			NOT NULL,
	CDREPRESENTANTE			VARCHAR(20)			NOT NULL,
	DTULTIMOSALDO			DATETIME			NOT NULL,
	VLULTIMOSALDO			DECIMAL(16,7)			NULL,
	CDUSUARIO				VARCHAR(8)			NOT NULL,
	NUCARIMBO				DECIMAL(9,0)			NULL,
	FLTIPOALTERACAO			CHAR(1)					NULL,
	DTALTERACAO				DATETIME				NULL,
	HRALTERACAO				VARCHAR(8)				NULL,
	CONSTRAINT		PK_TBLVPSALDOVENDAREP	PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, DTULTIMOSALDO, CDUSUARIO)
)
GO

CREATE TABLE TBLVPCARGAPRODUTO (
   CDEMPRESA			VARCHAR(20)		NOT NULL,
   CDREPRESENTANTE		VARCHAR(20)		NOT NULL,
   CDPRODUTO			VARCHAR(20)		NOT NULL,
   CDCARGAPRODUTO		VARCHAR(20)		NOT NULL,
   QTSOLICITADO			DECIMAL(16,7)		NULL,
   DTCADASTRO			DATETIME			NULL,
   HRCADASTRO			VARCHAR(8)			NULL,
   CDUSUARIO			VARCHAR(8)		NOT	NULL,
   NUCARIMBO			DECIMAL(9,0)		NULL,
   FLTIPOALTERACAO		CHAR(1)				NULL,
   DTALTERACAO			DATETIME			NULL,
   HRALTERACAO			VARCHAR(8)			NULL,
   CONSTRAINT PK_TBLVPCARGAPRODUTO PRIMARY KEY (CDEMPRESA,CDREPRESENTANTE,CDPRODUTO,CDCARGAPRODUTO,CDUSUARIO)
)
GO

CREATE TABLE TBLVPNFEESTOQUE (
	CDEMPRESA			VARCHAR(20) NOT NULL,
	CDREPRESENTANTE		VARCHAR(20) NOT NULL,
	NUSERIEREMESSA		VARCHAR(20) NOT NULL,
	NUNOTAREMESSA		VARCHAR(20) NOT NULL,
	CDSTATUSNFE			VARCHAR(20)		NULL,
	DSNATURAOPERACAO	VARCHAR(100)	NULL,
	NUCFOP				VARCHAR(20)		NULL,
	DTSOLICITACAO		DATETIME		NULL,
	VLCHAVEACESSO		VARCHAR(44)		NULL,
	DSTIPOEMISSAO		VARCHAR(40)		NULL,
	DSOBSERVACAO		VARCHAR(100)	NULL,
	CDTIPOOPERACAONFE	VARCHAR(20)		NULL,
	DTEMISSAO			DATETIME		NULL,
	HREMISSAO			VARCHAR(8)		NULL,
	DTRESPOSTA			DATETIME		NULL,
	HRRESPOSTA			VARCHAR(8)		NULL,
	DTSAIDA				DATETIME		NULL,
	HRSAIDA				VARCHAR(8)		NULL,
	VLTOTALNFE			DECIMAL(16, 7)	NULL,
	VLTOTALICMS			DECIMAL(16, 7)	NULL,
	VLTOTALST			DECIMAL(16, 7)	NULL,
	VLTOTALIPI			DECIMAL(16, 7)	NULL,
	VLTOTALFRETE		DECIMAL(16, 7)	NULL,
	VLTOTALSEGURO		DECIMAL(16, 7)	NULL,
	VLIBPT				DECIMAL(16, 7)	NULL,
	CDTRANSPORTADORA	VARCHAR(20)		NULL,
	FLTIPONFE			CHAR(1)			NULL,
	FLTIPOALTERACAO 	CHAR(1)     	NULL,
    CDUSUARIO       	VARCHAR(8)  NOT NULL,
    NUCARIMBO       	DECIMAL(9)  	NULL,
    DTALTERACAO     	DATETIME    	NULL,
    HRALTERACAO     	VARCHAR(8)  	NULL,
	CONSTRAINT PK_TBLVPNFEESTOQUE PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, NUNOTAREMESSA, NUSERIEREMESSA, CDUSUARIO)
)
GO

CREATE TABLE TBLVPITEMNFEESTOQUE (
	CDEMPRESA			VARCHAR(20) NOT NULL,
	CDREPRESENTANTE		VARCHAR(20) NOT NULL,
	NUSERIEREMESSA		VARCHAR(20) NOT NULL,
	NUNOTAREMESSA		VARCHAR(20) NOT NULL,
	CDPRODUTO			VARCHAR(20) NOT NULL,
	CDUNIDADE			VARCHAR(20)		NULL,
	QTITEM				DECIMAL(16, 7)	NULL,
	CDCLASSIFICFISCAL	VARCHAR(20)		NULL,
	VLITEM				DECIMAL(16, 7)	NULL,
	VLTOTALITEM			DECIMAL(16, 7)	NULL,
	VLTOTALICMS			DECIMAL(16, 7)	NULL,
	VLTOTALST			DECIMAL(16, 7)	NULL,
	VLPCTICMS			DECIMAL(16, 7)	NULL,
	VLPCTPIS			DECIMAL(16, 7)	NULL,
	VLPCTCOFINS			DECIMAL(16, 7)	NULL,
	QTPESO				DECIMAL(16, 7)	NULL,
	FLTIPOALTERACAO 	CHAR(1)     	NULL,
    CDUSUARIO       	VARCHAR(8)  NOT NULL,
    NUCARIMBO       	DECIMAL(9)  	NULL,
    DTALTERACAO     	DATETIME    	NULL,
    HRALTERACAO     	VARCHAR(8)  	NULL,
	CONSTRAINT PK_TBLVPITEMNFEESTOQUE PRIMARY KEY (CDEMPRESA, CDREPRESENTANTE, NUNOTAREMESSA, NUSERIEREMESSA, CDPRODUTO, CDUSUARIO)
)
GO

--VERSAO 5.280

/*-------------------------------------------------------------------------
Descrição: Novas colunas
------------------------------------------------------------------------*/
ALTER TABLE TBLVPPEDIDO ADD FLDESCONTOLIBERADOSENHA CHAR(1);
GO

ALTER TABLE TBLVPPEDIDOERP ADD FLDESCONTOLIBERADOSENHA CHAR(1);
GO

ALTER TABLE TBLVPITEMTABELAPRECO ADD VLPCTDESCAPROVADO DECIMAL(16,7);
GO
