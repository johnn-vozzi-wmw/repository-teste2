/*** versão do sistema para qual o banco é compatível ***/
update TBLVPSISTEMA set DSVERSAOSISTEMA = '3.35' where CDSISTEMA = 20;

/*-------------------------------------------------------------------------
Data: 16/04/2014
Autor: Tiago
Descrição: Novo campo na tabela DescontoGrupo
------------------------------------------------------------------------*/
ALTER TABLE TBLVPDESCONTOGRUPO ADD CDTABELAPRECO VARCHAR(20) DEFAULT '0' NOT NULL;
ALTER TABLE TBLVPDESCONTOGRUPO DROP CONSTRAINT PK_TBLVPDESCONTOGRUPO;
ALTER TABLE TBLVPDESCONTOGRUPO ADD CONSTRAINT PK_TBLVPDESCONTOGRUPO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDGRUPOPRODUTO1, CDTABELAPRECO, QTITEM, CDUSUARIO);


/*-------------------------------------------------------------------------
Data: 29/04/2014
Autor: Pedro
Descrição: Alterados tamanhos de campos
------------------------------------------------------------------------*/
/*----------------------ATENÇÃO-----------------------------------------*/
-Scripts para padronizar o tamanho das colunas númericas.
-Não é obrigatório executá-los, mas caso execute, deve-se ter atenção.
/*----------------------------------------------------------------------*/
--SQLSERVER
alter table tblvpCAMPO alter column NUCOLSPAN DECIMAL(9,0);
alter table tblvpCAMPO alter column NUROWSPAN DECIMAL(9,0);
alter table tblvpCAMPO alter column NUORDEM DECIMAL(9,0);
alter table tblvpCLIENTE alter column QTDIASMAXIMOPAGAMENTO DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column QTDIASMEDIOSPAGAMENTO DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUPARCELAS DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUINTERVALOENTRADA DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUINTERVALOPARCELAS DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUPRAZOBASE DECIMAL(9,0);
alter table tblvpFICHAFINANCEIRA alter column QTMEDIADIASATRASO DECIMAL(9,0);
alter table tblvpITEMPEDIDO alter column NUSEQITEMPEDIDO DECIMAL(9,0);
alter table tblvpITEMPEDIDOERP alter column NUSEQITEMPEDIDO DECIMAL(9,0);
alter table tblvpITEMPEDIDOERPDIF alter column NUSEQITEMPEDIDO DECIMAL(9,0);

ALTER TABLE tblvpITEMKITPEDIDO DROP CONSTRAINT PK_TBLVPITEMKITPEDIDO;
alter table tblvpITEMKITPEDIDO alter column NUSEQPRODUTO DECIMAL(9,0) NOT NULL;
ALTER TABLE tblvpITEMKITPEDIDO ADD CONSTRAINT PK_TBLVPITEMKITPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDKIT, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMKITPEDIDOERP DROP CONSTRAINT PK_TBLVPITEMKITPEDIDOERP;
alter table tblvpITEMKITPEDIDOERP alter column NUSEQPRODUTO DECIMAL(9,0) NOT NULL;
ALTER TABLE tblvpITEMKITPEDIDOERP ADD CONSTRAINT PK_TBLVPITEMKITPEDIDOERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDKIT, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDO DROP CONSTRAINT PK_TBLVPITEMPEDIDO;
alter table tblvpITEMPEDIDO alter column NUSEQPRODUTO DECIMAL(9,0) NOT NULL;
ALTER TABLE TBLVPITEMPEDIDO ADD CONSTRAINT PK_TBLVPITEMPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOERP DROP CONSTRAINT PK_TBLVPITEMPEDIDOERP;
alter table tblvpITEMPEDIDOERP alter column NUSEQPRODUTO DECIMAL(9,0) NOT NULL;
ALTER TABLE TBLVPITEMPEDIDOERP ADD CONSTRAINT PK_TBLVPITEMPEDIDOERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOERPDIF DROP CONSTRAINT PK_TBLVPITEMPEDIDOERPDIF;
alter table tblvpITEMPEDIDOERPDIF alter column NUSEQPRODUTO DECIMAL(9,0) NOT NULL;
ALTER TABLE TBLVPITEMPEDIDOERPDIF ADD CONSTRAINT PK_TBLVPITEMPEDIDOERPDIF PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOGRADE DROP CONSTRAINT PK_TBLVPITEMPEDIDOGRADE;
alter table tblvpITEMPEDIDOGRADE alter column NUSEQPRODUTO DECIMAL(9,0) NOT NULL;
ALTER TABLE TBLVPITEMPEDIDOGRADE ADD CONSTRAINT PK_TBLVPITEMPEDIDOGRADE PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDITEMGRADE1, CDITEMGRADE2, CDITEMGRADE3, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOGRADEERP DROP CONSTRAINT PK_TBLVPITEMPEDIDOGRADEERP;
alter table tblvpITEMPEDIDOGRADEERP alter column NUSEQPRODUTO DECIMAL(9,0) NOT NULL;
ALTER TABLE TBLVPITEMPEDIDOGRADEERP ADD CONSTRAINT PK_TBLVPITEMPEDIDOGRADEERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDITEMGRADE1, CDITEMGRADE2, CDITEMGRADE3, CDUSUARIO);

alter table tblvpTABELAPRECO alter column CDLISTATABELAPRECO DECIMAL(9,0);
alter table tblvpTABELAPRECO alter column CDCOLUNATABELAPRECO DECIMAL(9,0);
alter table tblvpTIPOPAGAMENTO alter column NUNIVEL DECIMAL(9,0);

ALTER TABLE TBLVPVERBAITEMPEDIDO DROP CONSTRAINT PK_TBLVPVERBAITEMPEDIDO;
alter table tblvpVERBAITEMPEDIDO alter column NUSEQPRODUTO DECIMAL(9,0) NOT NULL;
ALTER TABLE TBLVPVERBAITEMPEDIDO ADD CONSTRAINT PK_TBLVPVERBAITEMPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDVERBA, CDUSUARIO, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, NUSEQPRODUTO, FLTIPOITEMPEDIDO);
--/SQLSERVER

--ORACLE
alter table tblvpCAMPO alter column NUCOLSPAN DECIMAL(9,0);
alter table tblvpCAMPO alter column NUROWSPAN DECIMAL(9,0);
alter table tblvpCAMPO alter column NUORDEM DECIMAL(9,0);
alter table tblvpCLIENTE alter column QTDIASMAXIMOPAGAMENTO DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column QTDIASMEDIOSPAGAMENTO DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUPARCELAS DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUINTERVALOENTRADA DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUINTERVALOPARCELAS DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUPRAZOBASE DECIMAL(9,0);
alter table tblvpFICHAFINANCEIRA alter column QTMEDIADIASATRASO DECIMAL(9,0);
alter table tblvpITEMPEDIDO alter column NUSEQITEMPEDIDO DECIMAL(9,0);
alter table tblvpITEMPEDIDOERP alter column NUSEQITEMPEDIDO DECIMAL(9,0);
alter table tblvpITEMPEDIDOERPDIF alter column NUSEQITEMPEDIDO DECIMAL(9,0);

ALTER TABLE tblvpITEMKITPEDIDO DROP CONSTRAINT PK_TBLVPITEMKITPEDIDO;
alter table tblvpITEMKITPEDIDO alter column NUSEQPRODUTO DECIMAL(9,0);
ALTER TABLE tblvpITEMKITPEDIDO ADD CONSTRAINT PK_TBLVPITEMKITPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDKIT, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMKITPEDIDOERP DROP CONSTRAINT PK_TBLVPITEMKITPEDIDOERP;
alter table tblvpITEMKITPEDIDOERP alter column NUSEQPRODUTO DECIMAL(9,0);
ALTER TABLE tblvpITEMKITPEDIDOERP ADD CONSTRAINT PK_TBLVPITEMKITPEDIDOERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDKIT, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDO DROP CONSTRAINT PK_TBLVPITEMPEDIDO;
alter table tblvpITEMPEDIDO alter column NUSEQPRODUTO DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDO ADD CONSTRAINT PK_TBLVPITEMPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOERP DROP CONSTRAINT PK_TBLVPITEMPEDIDOERP;
alter table tblvpITEMPEDIDOERP alter column NUSEQPRODUTO DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDOERP ADD CONSTRAINT PK_TBLVPITEMPEDIDOERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOERPDIF DROP CONSTRAINT PK_TBLVPITEMPEDIDOERPDIF;
alter table tblvpITEMPEDIDOERPDIF alter column NUSEQPRODUTO DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDOERPDIF ADD CONSTRAINT PK_TBLVPITEMPEDIDOERPDIF PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOGRADE DROP CONSTRAINT PK_TBLVPITEMPEDIDOGRADE;
alter table tblvpITEMPEDIDOGRADE alter column NUSEQPRODUTO DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDOGRADE ADD CONSTRAINT PK_TBLVPITEMPEDIDOGRADE PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDITEMGRADE1, CDITEMGRADE2, CDITEMGRADE3, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOGRADEERP DROP CONSTRAINT PK_TBLVPITEMPEDIDOGRADEERP;
alter table tblvpITEMPEDIDOGRADEERP alter column NUSEQPRODUTO DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDOGRADEERP ADD CONSTRAINT PK_TBLVPITEMPEDIDOGRADEERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDITEMGRADE1, CDITEMGRADE2, CDITEMGRADE3, CDUSUARIO);

alter table tblvpTABELAPRECO alter column CDLISTATABELAPRECO DECIMAL(9,0);
alter table tblvpTABELAPRECO alter column CDCOLUNATABELAPRECO DECIMAL(9,0);
alter table tblvpTIPOPAGAMENTO alter column NUNIVEL DECIMAL(9,0);

ALTER TABLE TBLVPVERBAITEMPEDIDO DROP CONSTRAINT PK_TBLVPVERBAITEMPEDIDO;
alter table tblvpVERBAITEMPEDIDO alter column NUSEQPRODUTO DECIMAL(9,0);
ALTER TABLE TBLVPVERBAITEMPEDIDO ADD CONSTRAINT PK_TBLVPVERBAITEMPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDVERBA, CDUSUARIO, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, NUSEQPRODUTO, FLTIPOITEMPEDIDO);
--/ORACLE

--POSTGRES
alter table tblvpCAMPO alter column NUCOLSPAN TYPE DECIMAL(9,0);
alter table tblvpCAMPO alter column NUROWSPAN TYPE DECIMAL(9,0);
alter table tblvpCAMPO alter column NUORDEM TYPE DECIMAL(9,0);
alter table tblvpCLIENTE alter column QTDIASMAXIMOPAGAMENTO TYPE DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column QTDIASMEDIOSPAGAMENTO TYPE DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUPARCELAS TYPE DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUINTERVALOENTRADA TYPE DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUINTERVALOPARCELAS TYPE DECIMAL(9,0);
alter table tblvpCONDICAOPAGAMENTO alter column NUPRAZOBASE TYPE DECIMAL(9,0);
alter table tblvpFICHAFINANCEIRA alter column QTMEDIADIASATRASO TYPE DECIMAL(9,0);
alter table tblvpITEMPEDIDO alter column NUSEQITEMPEDIDO TYPE DECIMAL(9,0);
alter table tblvpITEMPEDIDOERP alter column NUSEQITEMPEDIDO TYPE DECIMAL(9,0);
alter table tblvpITEMPEDIDOERPDIF alter column NUSEQITEMPEDIDO TYPE DECIMAL(9,0);

ALTER TABLE tblvpITEMKITPEDIDO DROP CONSTRAINT PK_TBLVPITEMKITPEDIDO;
alter table tblvpITEMKITPEDIDO alter column NUSEQPRODUTO TYPE DECIMAL(9,0);
ALTER TABLE tblvpITEMKITPEDIDO ADD CONSTRAINT PK_TBLVPITEMKITPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDKIT, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMKITPEDIDOERP DROP CONSTRAINT PK_TBLVPITEMKITPEDIDOERP;
alter table tblvpITEMKITPEDIDOERP alter column NUSEQPRODUTO TYPE DECIMAL(9,0);
ALTER TABLE tblvpITEMKITPEDIDOERP ADD CONSTRAINT PK_TBLVPITEMKITPEDIDOERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDKIT, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDO DROP CONSTRAINT PK_TBLVPITEMPEDIDO;
alter table tblvpITEMPEDIDO alter column NUSEQPRODUTO TYPE DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDO ADD CONSTRAINT PK_TBLVPITEMPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOERP DROP CONSTRAINT PK_TBLVPITEMPEDIDOERP;
alter table tblvpITEMPEDIDOERP alter column NUSEQPRODUTO TYPE DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDOERP ADD CONSTRAINT PK_TBLVPITEMPEDIDOERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOERPDIF DROP CONSTRAINT PK_TBLVPITEMPEDIDOERPDIF;
alter table tblvpITEMPEDIDOERPDIF alter column NUSEQPRODUTO TYPE DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDOERPDIF ADD CONSTRAINT PK_TBLVPITEMPEDIDOERPDIF PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOGRADE DROP CONSTRAINT PK_TBLVPITEMPEDIDOGRADE;
alter table tblvpITEMPEDIDOGRADE alter column NUSEQPRODUTO TYPE DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDOGRADE ADD CONSTRAINT PK_TBLVPITEMPEDIDOGRADE PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDITEMGRADE1, CDITEMGRADE2, CDITEMGRADE3, CDUSUARIO);

ALTER TABLE tblvpITEMPEDIDOGRADEERP DROP CONSTRAINT PK_TBLVPITEMPEDIDOGRADEERP;
alter table tblvpITEMPEDIDOGRADEERP alter column NUSEQPRODUTO TYPE DECIMAL(9,0);
ALTER TABLE TBLVPITEMPEDIDOGRADEERP ADD CONSTRAINT PK_TBLVPITEMPEDIDOGRADEERP PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, FLTIPOITEMPEDIDO, NUSEQPRODUTO, CDITEMGRADE1, CDITEMGRADE2, CDITEMGRADE3, CDUSUARIO);

alter table tblvpTABELAPRECO alter column CDLISTATABELAPRECO TYPE DECIMAL(9,0);
alter table tblvpTABELAPRECO alter column CDCOLUNATABELAPRECO TYPE DECIMAL(9,0);
alter table tblvpTIPOPAGAMENTO alter column NUNIVEL TYPE DECIMAL(9,0);

ALTER TABLE TBLVPVERBAITEMPEDIDO DROP CONSTRAINT PK_TBLVPVERBAITEMPEDIDO;
alter table tblvpVERBAITEMPEDIDO alter column NUSEQPRODUTO TYPE DECIMAL(9,0);
ALTER TABLE TBLVPVERBAITEMPEDIDO ADD CONSTRAINT PK_TBLVPVERBAITEMPEDIDO PRIMARY KEY(CDEMPRESA, CDREPRESENTANTE, CDVERBA, CDUSUARIO, FLORIGEMPEDIDO, NUPEDIDO, CDPRODUTO, NUSEQPRODUTO, FLTIPOITEMPEDIDO);
--/POSTGRES

/*-------------------------------------------------------------------------
Data: 30/04/2014
Autor: Tiago
Descrição: Nova coluna na tabela Tributacao
------------------------------------------------------------------------*/

ALTER TABLE TBLVPTRIBUTACAO ADD VLPCTMINST DECIMAL(16,7);